import{r as l,j as e,X as N}from"./index-bOp1r2QL.js";import{M as k}from"./Modal-CRPkkT7Z.js";const f=(r,o=0)=>typeof r=="number"&&!isNaN(r)&&r>=o;function v(r){const o={};return r.name?.trim()||(o.name="Product name is required"),r.category?.trim()||(o.category="Category is required"),r.currentStock!==void 0&&!f(parseFloat(r.currentStock),0)&&(o.currentStock="Current stock must be a non-negative number"),r.costPerUnit!==void 0&&!f(parseFloat(r.costPerUnit),0)&&(o.costPerUnit="Cost per unit must be a non-negative number"),{isValid:Object.keys(o).length===0,errors:o}}function P({product:r,containers:o,onSubmit:p,onCancel:m}){const[t,g]=l.useState({name:"",category:"Shoes",currentStock:"",costPerKg:"",bagWeight:"25",description:""}),[s,b]=l.useState({}),[d,x]=l.useState(!1),y=["Shoes","Belts","Bags"];l.useEffect(()=>{r&&g({name:r.name||"",category:r.category||"Shoes",currentStock:r.currentStock?.toString()||"",costPerKg:r.costPerKg?.toString()||r.costPerUnit?.toString()||"",bagWeight:r.bagWeight?.toString()||"25",description:r.description||""})},[r]);const a=n=>{const{name:c,value:i}=n.target;g(u=>({...u,[c]:i})),s[c]&&b(u=>({...u,[c]:""}))},j=async n=>{n.preventDefault();const c=v(t);if(!c.isValid){b(c.errors);return}x(!0);try{const i={...t,currentStock:parseFloat(t.currentStock)||0,costPerKg:parseFloat(t.costPerKg)||0,bagWeight:parseFloat(t.bagWeight)||25,costPerUnit:parseFloat(t.costPerKg)||0};await p(i)}catch(i){console.error("Form submission error:",i)}finally{x(!1)}},h=()=>{m()};return e.jsx(k,{isOpen:!0,onClose:m,size:"large",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"sticky top-0 bg-white rounded-t-lg border-b border-gray-200 px-4 sm:px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:r?"Edit Product":"Add New Product"}),e.jsxs("button",{onClick:h,className:"text-gray-400 hover:text-gray-600 p-1 rounded-md hover:bg-gray-100 min-h-[44px] min-w-[44px] flex items-center justify-center",children:[e.jsx("span",{className:"sr-only",children:"Close"}),e.jsx(N,{className:"h-6 w-6"})]})]})}),e.jsx("div",{className:"px-4 sm:px-6 py-6",children:e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Product Name *"}),e.jsx("input",{type:"text",id:"name",name:"name",value:t.name,onChange:a,className:`mt-1 block w-full border rounded-md shadow-sm py-3 px-3 text-base focus:outline-none focus:ring-2 focus:ring-blue-500 ${s.name?"border-red-300 focus:border-red-500":"border-gray-300 focus:border-blue-500"}`,placeholder:"Product name"}),s.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.name})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700",children:"Category *"}),e.jsx("select",{id:"category",name:"category",value:t.category,onChange:a,className:`mt-1 block w-full border rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-2 focus:ring-blue-500 ${s.category?"border-red-300 focus:border-red-500":"border-gray-300 focus:border-blue-500"}`,children:y.map(n=>e.jsx("option",{value:n,children:n},n))}),s.category&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.category})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"currentStock",className:"block text-sm font-medium text-gray-700",children:"Current Stock (bags) *"}),e.jsx("input",{type:"number",id:"currentStock",name:"currentStock",value:t.currentStock,onChange:a,min:"0",step:"1",className:`mt-1 block w-full border rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-2 focus:ring-blue-500 ${s.currentStock?"border-red-300 focus:border-red-500":"border-gray-300 focus:border-blue-500"}`,placeholder:"0"}),s.currentStock&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.currentStock}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Number of bags in stock"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"costPerKg",className:"block text-sm font-medium text-gray-700",children:"Cost Per Kg ($) *"}),e.jsx("input",{type:"number",id:"costPerKg",name:"costPerKg",value:t.costPerKg,onChange:a,min:"0",step:"0.01",className:`mt-1 block w-full border rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-2 focus:ring-blue-500 ${s.costPerKg?"border-red-300 focus:border-red-500":"border-gray-300 focus:border-blue-500"}`,placeholder:"0.00"}),s.costPerKg&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.costPerKg}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Purchase cost per kilogram"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"bagWeight",className:"block text-sm font-medium text-gray-700",children:"Bag Weight (kg) *"}),e.jsxs("select",{id:"bagWeight",name:"bagWeight",value:t.bagWeight,onChange:a,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"20",children:"20 kg per bag"}),e.jsx("option",{value:"25",children:"25 kg per bag"})]})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description"}),e.jsx("textarea",{id:"description",name:"description",rows:3,value:t.description,onChange:a,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Description..."})]})]}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row sm:justify-end space-y-reverse space-y-3 sm:space-y-0 sm:space-x-3 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:h,disabled:d,className:"w-full sm:w-auto px-4 py-3 text-base font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed min-h-[44px]",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:d,className:"w-full sm:w-auto px-4 py-3 text-base font-medium text-white bg-blue-600 border border-transparent rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed min-h-[44px]",children:d?"Saving...":r?"Update Product":"Add Product"})]})]})})]})})}export{P as default};
