import{c as R,r as I,j as e,X as z,u as T,d as M,f as ae,T as re,D as W,e as L,b as G,W as Q,S as J}from"./index-bOp1r2QL.js";import{M as H}from"./Modal-CRPkkT7Z.js";import{T as B}from"./trending-up-BeCFhyzq.js";import{T as se}from"./trending-down-Jvct_1id.js";import{f as X}from"./dateFormatter-DEoQwZ0j.js";import{S as ne}from"./search-D6jJgAD0.js";import{F as le,U as K}from"./users-DTW1Gr4J.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],Y=R("building-2",ie);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],de=R("calculator",ce);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],me=R("clipboard-check",oe);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],te=R("pen",xe);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],he=R("refresh-cw",ue);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],ee=R("user",pe);function be({expectedBalance:l,onReconcile:u,onClose:C}){const[h,f]=I.useState(l.toString()),[x,d]=I.useState(""),t=2e3,a=parseFloat(h||0)-l,r=Math.max(0,parseFloat(h||0)-t),w=g=>{g.preventDefault(),u({actualCount:parseFloat(h),availableForDistribution:r,reservedAmount:t,notes:x.trim()})},b=g=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(g||0);return e.jsx(H,{isOpen:!0,onClose:C,size:"medium",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Daily Cash Reconciliation"}),e.jsx("button",{onClick:C,className:"text-gray-400 hover:text-gray-600",children:e.jsx(z,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:w,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expected Balance"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:b(l)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Actual Count *"}),e.jsx("input",{type:"number",value:h,onChange:g=>f(g.target.value),step:"0.01",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),a!==0&&e.jsx("div",{className:`p-3 rounded ${a>0?"bg-green-50":"bg-red-50"}`,children:e.jsxs("p",{className:"text-sm font-medium",children:["Discrepancy: ",b(a)]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:x,onChange:g=>d(g.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"Add any notes about the reconciliation..."})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:C,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:"Reconcile"})]})]})]})})}function ge({currentCashPosition:l,openingBalance:u}){const{sales:C,expenses:h,withdrawals:f,cashInjections:x=[],cashFlows:d,addCashFlow:t}=T(),{showSuccessMessage:a,showErrorMessage:r}=M(),[w,b]=I.useState(!1),g=new Date().toISOString().split("T")[0],y=C.reduce((i,c)=>i+(c.totalAmount||0),0);x.reduce((i,c)=>i+(c.amount||0),0);const o=h.filter(i=>i.date<g).reduce((i,c)=>i+c.amount,0),j=f.filter(i=>i.date<g).reduce((i,c)=>i+c.amount,0),N=x.filter(i=>i.date<g).reduce((i,c)=>i+c.amount,0),p=y+N-o-j,k=C.filter(i=>i.date===g),s=h.filter(i=>i.date===g),m=f.filter(i=>i.date===g),n=x.filter(i=>i.date===g),v=k.reduce((i,c)=>i+(c.totalAmount||0),0),P=n.reduce((i,c)=>i+(c.amount||0),0),$=v+P,F=s.reduce((i,c)=>i+c.amount,0),E=m.reduce((i,c)=>i+c.amount,0),V=F+E,_=$-V,O=p+_,q=d.find(i=>i.date===g),U=!!q,D=i=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(i||0),A=async i=>{try{await t({date:g,openingBalance:p,cashSales:$,cashExpenses:F,withdrawals:m.map(c=>c.id),theoreticalBalance:O,actualCount:i.actualCount,discrepancy:i.actualCount-O,availableForDistribution:i.availableForDistribution,reservedAmount:i.reservedAmount,notes:i.notes,reconciledBy:"Current User"}),a("Cash Reconciled","Daily cash flow has been reconciled successfully"),b(!1)}catch(c){r("Reconciliation Failed",c.message)}};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Today's Cash Flow"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),!U&&e.jsx("button",{onClick:()=>b(!0),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700",children:"Reconcile Cash"})]}),U?e.jsxs("div",{className:"mb-6 bg-green-50 border border-green-200 rounded-lg p-4 flex items-center",children:[e.jsx(ae,{className:"h-5 w-5 text-green-600 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-900",children:"Cash Reconciled"}),e.jsxs("p",{className:"text-sm text-green-700",children:["Today's cash has been reconciled. Actual: ",D(q.actualCount)," | Discrepancy: ",D(q.discrepancy)]})]})]}):e.jsxs("div",{className:"mb-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4 flex items-center",children:[e.jsx(re,{className:"h-5 w-5 text-yellow-600 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-yellow-900",children:"Pending Reconciliation"}),e.jsx("p",{className:"text-sm text-yellow-700",children:"Please reconcile today's cash before closing"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Opening Balance"}),e.jsx("p",{className:"text-xl font-semibold text-gray-900",children:D(p)}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Total Revenue: ",D(y)]})]}),e.jsx(W,{className:"h-8 w-8 text-gray-400"})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Cash Inflows"}),e.jsxs("p",{className:"text-xl font-semibold text-green-600",children:["+",D($)]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Sales: ",D(v)," | Injections: ",D(P)]})]}),e.jsx(B,{className:"h-8 w-8 text-green-500"})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Cash Outflows"}),e.jsxs("p",{className:"text-xl font-semibold text-red-600",children:["-",D(V)]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Expenses: ",D(F)," | Withdrawals: ",D(E)]})]}),e.jsx(se,{className:"h-8 w-8 text-red-500"})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Expected Balance"}),e.jsx("p",{className:"text-xl font-semibold text-gray-900",children:D(O)}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Net: ",_>=0?"+":"",D(_)]})]}),e.jsx(W,{className:"h-8 w-8 text-blue-500"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Cash Inflows"})}),e.jsx("div",{className:"p-4",children:k.length===0&&n.length===0?e.jsx("p",{className:"text-sm text-gray-500",children:"No cash inflows today"}):e.jsxs("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:[k.map(i=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:i.productName}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Sale - Qty: ",i.quantity]})]}),e.jsxs("span",{className:"text-sm font-medium text-green-600",children:["+",D(i.totalAmount)]})]},i.id)),n.map(i=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:i.description}),e.jsx("p",{className:"text-xs text-gray-500",children:i.type})]}),e.jsxs("span",{className:"text-sm font-medium text-green-600",children:["+",D(i.amount)]})]},i.id))]})})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Cash Outflows"})}),e.jsx("div",{className:"p-4",children:s.length===0&&m.length===0?e.jsx("p",{className:"text-sm text-gray-500",children:"No cash outflows today"}):e.jsxs("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:[s.map(i=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:i.description}),e.jsx("p",{className:"text-xs text-gray-500",children:i.category})]}),e.jsxs("span",{className:"text-sm font-medium text-red-600",children:["-",D(i.amount)]})]},i.id)),m.map(i=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[i.partnerName," - Withdrawal"]}),e.jsx("p",{className:"text-xs text-gray-500",children:i.type})]}),e.jsxs("span",{className:"text-sm font-medium text-red-600",children:["-",D(i.amount)]})]},i.id))]})})]})]}),w&&e.jsx(be,{expectedBalance:O,onReconcile:A,onClose:()=>b(!1)})]})}function fe({availableCash:l,onClose:u}){const{partners:C,addWithdrawal:h}=T(),{showSuccessMessage:f,showErrorMessage:x}=M(),[d,t]=I.useState({partnerId:"",amount:"",type:"personal",purpose:"",notes:"",date:new Date().toISOString().split("T")[0],time:new Date().toTimeString().split(" ")[0].substring(0,5)}),[a,r]=I.useState({}),[w,b]=I.useState(!1),g=[{value:"personal",label:"Personal Draw"},{value:"business_expense",label:"Business Expense"},{value:"profit_distribution",label:"Profit Distribution"},{value:"loan",label:"Loan"}],y=async o=>{o.preventDefault();const j={};if(d.partnerId||(j.partnerId="Please select a partner"),!d.amount||parseFloat(d.amount)<=0?j.amount="Amount must be greater than 0":parseFloat(d.amount)>l&&(j.amount=`Cannot exceed available cash (${l.toFixed(2)})`),d.purpose||(j.purpose="Purpose is required"),Object.keys(j).length>0){r(j);return}b(!0);try{const N=C.find(p=>p.id===d.partnerId);await h({partnerId:d.partnerId,partnerName:N?.name||"Unknown",amount:parseFloat(d.amount),type:d.type,purpose:d.purpose,notes:d.notes,date:d.date,time:d.time}),f("Withdrawal Recorded","The withdrawal has been recorded successfully"),u()}catch(N){x("Operation Failed",N.message)}finally{b(!1)}};return e.jsx(H,{isOpen:!0,onClose:u,size:"medium",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Record Withdrawal"}),e.jsx("button",{onClick:u,className:"text-gray-400 hover:text-gray-600",children:e.jsx(z,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:y,className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Partner *"}),e.jsxs("select",{value:d.partnerId,onChange:o=>t({...d,partnerId:o.target.value}),className:`w-full px-3 py-2 border rounded-md ${a.partnerId?"border-red-300":"border-gray-300"}`,children:[e.jsx("option",{value:"",children:"Select partner..."}),C.map(o=>e.jsxs("option",{value:o.id,children:[o.name," (",o.ownershipPercent,"%)"]},o.id))]}),a.partnerId&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.partnerId})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount ($) *"}),e.jsx("input",{type:"number",value:d.amount,onChange:o=>t({...d,amount:o.target.value}),step:"0.01",min:"0",className:`w-full px-3 py-2 border rounded-md ${a.amount?"border-red-300":"border-gray-300"}`}),a.amount&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.amount}),e.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Available: $",l.toFixed(2)]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type *"}),e.jsx("select",{value:d.type,onChange:o=>t({...d,type:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:g.map(o=>e.jsx("option",{value:o.value,children:o.label},o.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Purpose *"}),e.jsx("input",{type:"text",value:d.purpose,onChange:o=>t({...d,purpose:o.target.value}),className:`w-full px-3 py-2 border rounded-md ${a.purpose?"border-red-300":"border-gray-300"}`}),a.purpose&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.purpose})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:d.notes,onChange:o=>t({...d,notes:o.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:u,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:w,className:"px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-md hover:bg-green-700 disabled:opacity-50",children:w?"Recording...":"Record Withdrawal"})]})]})]})})}function ye({availableCash:l}){const{partners:u,withdrawals:C,deleteWithdrawal:h}=T(),{showConfirmDialog:f,showSuccessMessage:x,showErrorMessage:d}=M(),[t,a]=I.useState(!1),[r,w]=I.useState(""),[b,g]=I.useState(""),[y,o]=I.useState(""),j=C.filter(s=>{const m=!r||s.purpose?.toLowerCase().includes(r.toLowerCase())||s.notes?.toLowerCase().includes(r.toLowerCase()),n=!b||s.partnerId===b,v=!y||s.type===y;return m&&n&&v}).sort((s,m)=>new Date(m.date)-new Date(s.date)),N=async s=>{if(await f("Delete Withdrawal",`Are you sure you want to delete this $${s.amount} withdrawal? This will update the partner's capital account.`,"danger"))try{await h(s.id),x("Withdrawal Deleted","The withdrawal has been removed and capital account updated")}catch(n){d("Delete Failed",n.message)}},p=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(s||0),k=j.reduce((s,m)=>s+m.amount,0);return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Withdrawal History"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[j.length," withdrawals â€¢ ",p(k)," total"]})]}),e.jsxs("button",{onClick:()=>a(!0),disabled:u.length===0||l<=0,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),"Record Withdrawal"]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(ne,{className:"h-5 w-5 absolute left-3 top-3 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search withdrawals...",value:r,onChange:s=>w(s.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md"})]})}),e.jsxs("select",{value:b,onChange:s=>g(s.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",children:[e.jsx("option",{value:"",children:"All Partners"}),u.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),e.jsxs("select",{value:y,onChange:s=>o(s.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"personal",children:"Personal Draw"}),e.jsx("option",{value:"business_expense",children:"Business Expense"}),e.jsx("option",{value:"profit_distribution",children:"Profit Distribution"}),e.jsx("option",{value:"loan",children:"Loan"})]})]}),j.length===0?e.jsx("div",{className:"text-center py-12 bg-white rounded-lg border border-gray-200",children:e.jsx("p",{className:"text-gray-500",children:"No withdrawals found"})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Partner"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Purpose"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:j.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:X(s.date)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:s.partnerName}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:p(s.amount)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800",children:s.type?.replace("_"," ")})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:s.purpose}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsx("button",{onClick:()=>N(s),className:"text-red-600 hover:text-red-900",children:e.jsx(G,{className:"h-4 w-4"})})})]},s.id))})]})}),t&&e.jsx(fe,{availableCash:l,onClose:()=>a(!1)})]})}function je({partner:l,onClose:u}){const{partners:C,addPartner:h,updatePartner:f}=T(),{showSuccessMessage:x,showErrorMessage:d}=M(),[t,a]=I.useState({name:l?.name||"",email:l?.email||"",phoneNumber:l?.phoneNumber||"",ownershipPercent:l?.ownershipPercent?.toString()||"",initialInvestment:l?.capitalAccount?.initialInvestment?.toString()||"0",bankDetails:{accountName:l?.bankDetails?.accountName||"",accountNumber:l?.bankDetails?.accountNumber||"",bankName:l?.bankDetails?.bankName||""}}),[r,w]=I.useState({}),[b,g]=I.useState(!1),y=N=>{const{name:p,value:k}=N.target;if(p.startsWith("bank_")){const s=p.replace("bank_","");a(m=>({...m,bankDetails:{...m.bankDetails,[s]:k}}))}else a(s=>({...s,[p]:k}));r[p]&&w(s=>{const m={...s};return delete m[p],m})},o=()=>{const N={};if(t.name.trim()||(N.name="Partner name is required"),!t.ownershipPercent)N.ownershipPercent="Ownership percentage is required";else{const p=parseFloat(t.ownershipPercent);(p<=0||p>100)&&(N.ownershipPercent="Must be between 0 and 100");const k=C.filter(s=>s.id!==l?.id).reduce((s,m)=>s+(m.ownershipPercent||0),0);k+p>100&&(N.ownershipPercent=`Total ownership would exceed 100% (current: ${k}%)`)}return t.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.email)&&(N.email="Invalid email format"),t.initialInvestment&&parseFloat(t.initialInvestment)<0&&(N.initialInvestment="Investment cannot be negative"),w(N),Object.keys(N).length===0},j=async N=>{if(N.preventDefault(),!!o()){g(!0);try{const p={name:t.name.trim(),email:t.email.trim(),phoneNumber:t.phoneNumber.trim(),ownershipPercent:parseFloat(t.ownershipPercent),initialInvestment:parseFloat(t.initialInvestment||0),bankDetails:{accountName:t.bankDetails.accountName.trim(),accountNumber:t.bankDetails.accountNumber.trim(),bankName:t.bankDetails.bankName.trim()}};l?(await f(l.id,p),x("Partner Updated",`${p.name}'s information has been updated`)):(await h(p),x("Partner Added",`${p.name} has been added successfully`)),u()}catch(p){console.error("Partner form submission error:",p),d("Operation Failed",p.message||"Failed to save partner")}finally{g(!1)}}};return e.jsx(H,{isOpen:!0,onClose:u,size:"medium",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:l?"Edit Partner":"Add New Partner"}),e.jsx("button",{onClick:u,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(z,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:j,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name *"}),e.jsx("input",{type:"text",id:"name",name:"name",value:t.name,onChange:y,className:`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 ${r.name?"border-red-300":"border-gray-300"}`,placeholder:"Partner name"}),r.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.name})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"ownershipPercent",className:"block text-sm font-medium text-gray-700 mb-1",children:"Ownership (%) *"}),e.jsx("input",{type:"number",id:"ownershipPercent",name:"ownershipPercent",value:t.ownershipPercent,onChange:y,min:"0",max:"100",step:"0.01",className:`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 ${r.ownershipPercent?"border-red-300":"border-gray-300"}`,placeholder:"50"}),r.ownershipPercent&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.ownershipPercent})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:"Contact Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),e.jsx("input",{type:"email",id:"email",name:"email",value:t.email,onChange:y,className:`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 ${r.email?"border-red-300":"border-gray-300"}`,placeholder:"Email address"}),r.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.email})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phoneNumber",className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),e.jsx("input",{type:"tel",id:"phoneNumber",name:"phoneNumber",value:t.phoneNumber,onChange:y,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Phone number"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:"Financial Information"}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{htmlFor:"initialInvestment",className:"block text-sm font-medium text-gray-700 mb-1",children:"Initial Investment ($)"}),e.jsx("input",{type:"number",id:"initialInvestment",name:"initialInvestment",value:t.initialInvestment,onChange:y,min:"0",step:"0.01",className:`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 ${r.initialInvestment?"border-red-300":"border-gray-300"}`,placeholder:"Initial investment"}),r.initialInvestment&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.initialInvestment})]})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:"Bank Details (Optional)"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"bank_accountName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Account Name"}),e.jsx("input",{type:"text",id:"bank_accountName",name:"bank_accountName",value:t.bankDetails.accountName,onChange:y,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Partner name"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"bank_bankName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Bank Name"}),e.jsx("input",{type:"text",id:"bank_bankName",name:"bank_bankName",value:t.bankDetails.bankName,onChange:y,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Bank name"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"bank_accountNumber",className:"block text-sm font-medium text-gray-700 mb-1",children:"Account Number"}),e.jsx("input",{type:"text",id:"bank_accountNumber",name:"bank_accountNumber",value:t.bankDetails.accountNumber,onChange:y,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Account number"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:u,disabled:b,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:b,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:b?"Saving...":l?"Update Partner":"Add Partner"})]})]})]})})}function Ne({partner:l,onClose:u}){const{withdrawals:C}=T(),h=C.filter(a=>a.partnerId===l.id).sort((a,r)=>new Date(r.date)-new Date(a.date)),f=l.capitalAccount||{},x=h.reduce((a,r)=>a+r.amount,0),d=(f.initialInvestment||0)+(f.profitShare||0)-x,t=a=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a||0);return e.jsx(H,{isOpen:!0,onClose:u,size:"large",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:l.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[l.ownershipPercent,"% Partner"]})]}),e.jsx("button",{onClick:u,className:"text-gray-400 hover:text-gray-600",children:e.jsx(z,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h4",{className:"text-base font-medium text-gray-900 mb-4",children:"Capital Account"}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Initial Investment"}),e.jsx("span",{className:"text-sm font-medium",children:t(f.initialInvestment||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Profit Share"}),e.jsx("span",{className:"text-sm font-medium",children:t(f.profitShare||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Withdrawn"}),e.jsxs("span",{className:"text-sm font-medium text-red-600",children:["-",t(x)]})]}),e.jsxs("div",{className:"flex justify-between pt-2 border-t border-gray-200",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Current Equity"}),e.jsx("span",{className:`text-base font-semibold ${d>=0?"text-green-600":"text-red-600"}`,children:t(d)})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-base font-medium text-gray-900 mb-4",children:"Recent Withdrawals"}),h.length===0?e.jsx("p",{className:"text-sm text-gray-500",children:"No withdrawals recorded"}):e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:h.slice(0,10).map(a=>e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:t(a.amount)}),e.jsxs("p",{className:"text-xs text-gray-500",children:[a.type," - ",a.purpose]})]}),e.jsx("span",{className:"text-sm text-gray-600",children:X(a.date)})]},a.id))})]})]})]})})}function we(){const{partners:l,withdrawals:u,deletePartner:C}=T(),{showConfirmDialog:h,showSuccessMessage:f,showErrorMessage:x}=M(),[d,t]=I.useState(!1),[a,r]=I.useState(null),[w,b]=I.useState(null),g=()=>{r(null),t(!0)},y=s=>{r(s),t(!0)},o=s=>{b(s)},j=async s=>{const m=u.filter(v=>v.partnerId===s.id);if(m.length>0){x("Cannot Delete Partner",`${s.name} has ${m.length} withdrawal records. Archive partner instead.`);return}if(await h("Delete Partner",`Are you sure you want to delete ${s.name}? This action cannot be undone.`,"danger"))try{await C(s.id),f("Partner Deleted",`${s.name} has been removed`)}catch(v){x("Delete Failed",v.message)}},N=s=>{const m=u.filter(F=>F.partnerId===s.id),n=m.reduce((F,E)=>F+E.amount,0),v=m.sort((F,E)=>new Date(E.date)-new Date(F.date))[0],P=s.capitalAccount||{},$=(P.initialInvestment||0)+(P.profitShare||0)-n;return{totalWithdrawn:n,lastWithdrawal:v,currentEquity:$,withdrawalCount:m.length}},p=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(s||0),k=s=>s?X(s):"Never";return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Partners"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage partner profiles and equity accounts"})]}),e.jsxs("button",{onClick:g,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),"Add Partner"]})]}),l.length===0?e.jsxs("div",{className:"text-center py-12 bg-white rounded-lg border-2 border-dashed border-gray-300",children:[e.jsx(ee,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No Partners"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"No partners added."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.map(s=>{const m=N(s),n=m.currentEquity>=0;return e.jsx("div",{className:"bg-white rounded-lg shadow hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-12 w-12 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx(ee,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[s.ownershipPercent,"% ownership"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("button",{onClick:()=>o(s),className:"text-blue-600 hover:text-blue-800 p-1",title:"View details",children:e.jsx(B,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>y(s),className:"text-gray-600 hover:text-gray-800 p-1",title:"Edit partner",children:e.jsx(te,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>j(s),className:"text-red-600 hover:text-red-800 p-1",title:"Delete partner",children:e.jsx(G,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Current Equity"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:`text-lg font-semibold ${n?"text-green-600":"text-red-600"}`,children:p(m.currentEquity)}),n?e.jsx(B,{className:"h-4 w-4 text-green-600 ml-1"}):e.jsx(se,{className:"h-4 w-4 text-red-600 ml-1"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Initial Investment"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:p(s.capitalAccount?.initialInvestment||0)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Withdrawn"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:p(m.totalWithdrawn)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Last Withdrawal"}),e.jsx("span",{className:"text-sm text-gray-500",children:k(m.lastWithdrawal?.date)})]})]}),(s.email||s.phoneNumber)&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[s.email&&e.jsxs("p",{className:"text-sm text-gray-600 truncate",children:["ðŸ“§ ",s.email]}),s.phoneNumber&&e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["ðŸ“± ",s.phoneNumber]})]})]})},s.id)})}),d&&e.jsx(je,{partner:a,onClose:()=>{t(!1),r(null)}}),w&&e.jsx(Ne,{partner:w,onClose:()=>b(null)})]})}function ve({injection:l,onClose:u}){const{partners:C,addCashInjection:h,updateCashInjection:f}=T(),{showSuccessMessage:x,showErrorMessage:d}=M(),[t,a]=I.useState({type:l?.type||"Capital Contribution",amount:l?.amount?.toString()||"",date:l?.date||new Date().toISOString().split("T")[0],source:l?.source||"",description:l?.description||"",reference:l?.reference||"",partnerId:l?.partnerId||"",notes:l?.notes||""}),[r,w]=I.useState({}),[b,g]=I.useState(!1),y=[{value:"Capital Contribution",label:"Capital Contribution",requiresPartner:!0},{value:"Loan",label:"Loan/Financing",requiresPartner:!1},{value:"Other Income",label:"Other Income",requiresPartner:!1},{value:"Opening Balance",label:"Opening Balance Adjustment",requiresPartner:!1}],o=y.find(s=>s.value===t.type),j=s=>{const{name:m,value:n}=s.target;a(v=>({...v,[m]:n})),r[m]&&w(v=>({...v,[m]:""})),m==="type"&&(y.find(P=>P.value===n)?.requiresPartner||a(P=>({...P,partnerId:""})))},N=()=>{const s={};return t.type||(s.type="Please select an injection type"),t.amount?parseFloat(t.amount)<=0&&(s.amount="Amount must be greater than 0"):s.amount="Amount is required",t.date||(s.date="Date is required"),t.source.trim()||(s.source="Source is required"),o?.requiresPartner&&!t.partnerId&&(s.partnerId="Please select a partner for capital contribution"),t.description.trim()||(s.description="Description is required"),w(s),Object.keys(s).length===0},p=async s=>{if(s.preventDefault(),!!N()){g(!0);try{const m={type:t.type,amount:parseFloat(t.amount),date:t.date,source:t.source.trim(),description:t.description.trim(),reference:t.reference.trim(),partnerId:t.partnerId||null,notes:t.notes.trim()};l?(await f(l.id,m),x("Cash Injection Updated","Cash injection has been updated successfully")):(await h(m),x("Cash Injection Added","New cash injection has been recorded successfully")),u()}catch(m){console.error("Cash injection submission error:",m),d("Submission Failed",m.message||"Failed to record cash injection")}finally{g(!1)}}},k=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(s||0);return e.jsx(H,{isOpen:!0,onClose:u,size:"medium",children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl p-5",children:e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:l?"Edit Cash Injection":"Add Cash Injection"}),e.jsxs("button",{onClick:u,className:"text-gray-400 hover:text-gray-600",children:[e.jsx("span",{className:"sr-only",children:"Close"}),e.jsx(z,{className:"h-6 w-6"})]})]}),e.jsxs("form",{onSubmit:p,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-gray-700 mb-1",children:"Injection Type *"}),e.jsx("select",{id:"type",name:"type",value:t.type,onChange:j,className:`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 ${r.type?"border-red-300 focus:border-red-500":"border-gray-300 focus:border-blue-500"}`,children:y.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))}),r.type&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.type})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"amount",className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount ($) *"}),e.jsx("input",{type:"number",id:"amount",name:"amount",value:t.amount,onChange:j,min:"0",step:"0.01",className:`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 ${r.amount?"border-red-300 focus:border-red-500":"border-gray-300 focus:border-blue-500"}`,placeholder:"0.00"}),r.amount&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.amount})]})]}),o?.requiresPartner&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"partnerId",className:"block text-sm font-medium text-gray-700 mb-1",children:"Partner *"}),e.jsxs("select",{id:"partnerId",name:"partnerId",value:t.partnerId,onChange:j,className:`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 ${r.partnerId?"border-red-300 focus:border-red-500":"border-gray-300 focus:border-blue-500"}`,children:[e.jsx("option",{value:"",children:"Select a partner"}),C.map(s=>e.jsxs("option",{value:s.id,children:[s.name," (",s.ownershipPercent,"%)"]},s.id))]}),r.partnerId&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.partnerId})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"source",className:"block text-sm font-medium text-gray-700 mb-1",children:"Source *"}),e.jsx("input",{type:"text",id:"source",name:"source",value:t.source,onChange:j,className:`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 ${r.source?"border-red-300 focus:border-red-500":"border-gray-300 focus:border-blue-500"}`,placeholder:"Source"}),r.source&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.source})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-700 mb-1",children:"Date *"}),e.jsx("input",{type:"date",id:"date",name:"date",value:t.date,onChange:j,className:`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 ${r.date?"border-red-300 focus:border-red-500":"border-gray-300 focus:border-blue-500"}`}),r.date&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.date})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description *"}),e.jsx("input",{type:"text",id:"description",name:"description",value:t.description,onChange:j,className:`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 ${r.description?"border-red-300 focus:border-red-500":"border-gray-300 focus:border-blue-500"}`,placeholder:"Description"}),r.description&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.description})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"reference",className:"block text-sm font-medium text-gray-700 mb-1",children:"Reference Number"}),e.jsx("input",{type:"text",id:"reference",name:"reference",value:t.reference,onChange:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Reference number"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Optional reference for tracking"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 mb-1",children:"Additional Notes"}),e.jsx("textarea",{id:"notes",name:"notes",value:t.notes,onChange:j,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Notes"})]}),t.amount&&e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[e.jsx("h4",{className:"text-sm font-medium text-green-900 mb-2",children:"Cash Injection Summary"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-green-700",children:"Type:"}),e.jsx("span",{className:"font-semibold text-green-900",children:t.type})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-green-700",children:"Amount:"}),e.jsx("span",{className:"font-semibold text-green-900",children:k(t.amount)})]}),o?.requiresPartner&&t.partnerId&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-green-700",children:"Partner:"}),e.jsx("span",{className:"font-semibold text-green-900",children:C.find(s=>s.id===t.partnerId)?.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-green-700",children:"Date:"}),e.jsx("span",{className:"font-semibold text-green-900",children:new Date(t.date).toLocaleDateString()})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:u,disabled:b,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:b,className:"px-4 py-2 text-sm font-medium text-white bg-green-600 border border-transparent rounded-md shadow-sm hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed",children:b?"Processing...":l?"Update Injection":"Add Cash Injection"})]})]})]})})})}function Ce(){const{cashInjections:l=[],partners:u,deleteCashInjection:C}=T(),{showSuccessMessage:h,showErrorMessage:f,showConfirmDialog:x}=M(),[d,t]=I.useState(!1),[a,r]=I.useState(null),[w,b]=I.useState("all"),y=[...w==="all"?l:l.filter(n=>n.type===w)].sort((n,v)=>new Date(v.date)-new Date(n.date)),o=l.reduce((n,v)=>(n[v.type]=(n[v.type]||0)+v.amount,n),{}),j=Object.values(o).reduce((n,v)=>n+v,0),N=n=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(n||0),p=n=>{r(n),t(!0)},k=async n=>{if(await x("Delete Cash Injection",`Are you sure you want to delete this ${N(n.amount)} ${n.type.toLowerCase()}? ${n.type==="Capital Contribution"?"This will also update the partner's equity account.":"This action cannot be undone."}`))try{await C(n.id),h("Injection Deleted","Cash injection has been removed successfully")}catch(P){f("Delete Failed",P.message||"Failed to delete cash injection")}},s=n=>{switch(n){case"Capital Contribution":return e.jsx(Q,{className:"h-5 w-5 text-purple-600"});case"Loan":return e.jsx(Y,{className:"h-5 w-5 text-orange-600"});case"Other Income":return e.jsx(B,{className:"h-5 w-5 text-green-600"});case"Opening Balance":return e.jsx(J,{className:"h-5 w-5 text-blue-600"});default:return e.jsx(W,{className:"h-5 w-5 text-gray-600"})}},m=n=>{switch(n){case"Capital Contribution":return"bg-purple-100 text-purple-800";case"Loan":return"bg-orange-100 text-orange-800";case"Other Income":return"bg-green-100 text-green-800";case"Opening Balance":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Cash Injections"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Track capital contributions, loans, and other cash additions"})]}),e.jsxs("button",{onClick:()=>{r(null),t(!0)},className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700",children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),"Add Cash Injection"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-6",children:[e.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Injections"}),e.jsx("p",{className:"text-xl font-semibold text-gray-900",children:N(j)})]}),e.jsx(W,{className:"h-8 w-8 text-green-500"})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Capital Contributions"}),e.jsx("p",{className:"text-lg font-semibold text-purple-600",children:N(o["Capital Contribution"]||0)})]}),e.jsx(Q,{className:"h-8 w-8 text-purple-500"})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Loans"}),e.jsx("p",{className:"text-lg font-semibold text-orange-600",children:N(o.Loan||0)})]}),e.jsx(Y,{className:"h-8 w-8 text-orange-500"})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Other Income"}),e.jsx("p",{className:"text-lg font-semibold text-green-600",children:N(o["Other Income"]||0)})]}),e.jsx(B,{className:"h-8 w-8 text-green-500"})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Opening Balance"}),e.jsx("p",{className:"text-lg font-semibold text-blue-600",children:N(o["Opening Balance"]||0)})]}),e.jsx(J,{className:"h-8 w-8 text-blue-500"})]})})]}),e.jsx("div",{className:"border-b border-gray-200 mb-4",children:e.jsxs("nav",{className:"-mb-px flex space-x-8",children:[e.jsxs("button",{onClick:()=>b("all"),className:`whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm ${w==="all"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["All (",l.length,")"]}),["Capital Contribution","Loan","Other Income","Opening Balance"].map(n=>{const v=l.filter(P=>P.type===n).length;return e.jsxs("button",{onClick:()=>b(n),className:`whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm ${w===n?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[n," (",v,")"]},n)})]})}),y.length===0?e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-8 text-center",children:[e.jsx(W,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Cash Injections"}),e.jsx("p",{className:"text-gray-600",children:w==="all"?"No records found":`No ${w.toLowerCase()} records found`})]}):e.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:e.jsx("ul",{className:"divide-y divide-gray-200",children:y.map(n=>{const v=n.partnerId?u.find(P=>P.id===n.partnerId):null;return e.jsx("li",{children:e.jsx("div",{className:"px-4 py-4 sm:px-6 hover:bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:s(n.type)}),e.jsxs("div",{className:"ml-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:n.description}),e.jsx("span",{className:`ml-3 inline-flex px-2 py-0.5 text-xs font-semibold rounded-full ${m(n.type)}`,children:n.type})]}),e.jsxs("div",{className:"mt-1 flex items-center text-sm text-gray-500",children:[e.jsx("span",{children:X(n.date)}),e.jsx("span",{className:"mx-2",children:"â€¢"}),e.jsx("span",{children:n.source}),v&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"mx-2",children:"â€¢"}),e.jsx("span",{className:"text-purple-600",children:v.name})]}),n.reference&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"mx-2",children:"â€¢"}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(le,{className:"h-3 w-3 mr-1"}),n.reference]})]})]}),n.notes&&e.jsx("p",{className:"mt-1 text-xs text-gray-500 italic",children:n.notes})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"text-right mr-4",children:e.jsxs("p",{className:"text-lg font-semibold text-green-600",children:["+",N(n.amount)]})}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>p(n),className:"text-gray-400 hover:text-blue-600",title:"Edit injection",children:e.jsx(te,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>k(n),className:"text-gray-400 hover:text-red-600",title:"Delete injection",children:e.jsx(G,{className:"h-4 w-4"})})]})]})]})})},n.id)})})}),d&&e.jsx(ve,{injection:a,onClose:()=>{t(!1),r(null)}})]})}function Ie(l,u,C){const h=l.reduce((t,a)=>t+(a.totalInvestment||0),0),f=u.reduce((t,a)=>t+(a.totalAmount||0),0),x=C.reduce((t,a)=>t+a.amount,0),d=f-x-h;return{totalContainerCost:h,totalSalesRevenue:f,totalExpenses:x,currentCashPosition:d}}function Se(l,u,C){const h=[];l.forEach(a=>{const r=a.arrivalDate||a.orderDate||a.createdAt||"2024-01-01";h.push({date:r,type:"expense",category:"Container Purchase",description:`Container ${a.id} - ${a.name}`,amount:-(a.totalInvestment||0),reference:`container_${a.id}`})}),u.forEach(a=>{h.push({date:a.date,type:"sale",category:"Product Sale",description:`Sale #${a.id}`,amount:a.totalAmount||0,reference:`sale_${a.id}`})}),C.forEach(a=>{h.push({date:a.date,type:"expense",category:a.category,description:a.description,amount:-a.amount,reference:`expense_${a.id}`})}),h.sort((a,r)=>new Date(a.date)-new Date(r.date));let f=0;const x=[],d=h.reduce((a,r)=>{const w=r.date;return a[w]||(a[w]=[]),a[w].push(r),a},{});return Object.keys(d).sort((a,r)=>new Date(a)-new Date(r)).forEach(a=>{const r=d[a],w=r.filter(o=>o.amount>0).reduce((o,j)=>o+j.amount,0),b=r.filter(o=>o.amount<0).reduce((o,j)=>o+Math.abs(j.amount),0),g=f,y=f+w-b;f=y,x.push({id:`cf_${a}`,date:a,openingBalance:g,cashIn:w,cashOut:b,theoreticalBalance:y,actualBalance:y,discrepancy:0,transactions:r,reconciled:!0,reconciledBy:"System Init",reconciledAt:new Date().toISOString()})}),x}function ke(l){const{containers:u,sales:C,expenses:h}=l,f=Ie(u,C,h),x=Se(u,C,h),d=l.partners||[],t=new Date().toISOString().split("T")[0];let a=x.find(r=>r.date===t);if(!a){const r=x[x.length-1];a={id:`cf_${t}`,date:t,openingBalance:r?r.theoreticalBalance:0,cashIn:0,cashOut:0,theoreticalBalance:r?r.theoreticalBalance:0,actualBalance:r?r.theoreticalBalance:0,discrepancy:0,transactions:[],reconciled:!1},x.push(a)}return{partners:d,cashFlows:x,withdrawals:l.withdrawals||[],financialSummary:{...f,lastSync:new Date().toISOString(),syncedFromExistingData:!0}}}function Oe(){const{partners:l,withdrawals:u,cashFlows:C,cashInjections:h=[],sales:f,expenses:x,containers:d,syncFinanceData:t}=T(),{showSuccessMessage:a,showInfoMessage:r,showErrorMessage:w}=M(),[b,g]=I.useState("dashboard"),[y,o]=I.useState(!1),[j,N]=I.useState(!1);I.useEffect(()=>{j||(p(!0),N(!0))},[]);const p=async(c=!1)=>{o(!0);try{const S=ke({containers:d,sales:f,expenses:x,partners:l,withdrawals:u});await t(S),c||a("Finance Data Synced",`Successfully synced ${S.cashFlows.length} cash flow records from existing transactions`)}catch(S){console.error("Sync error:",S),w("Sync Failed",S.message)}finally{o(!1)}},k=new Date().toISOString().split("T")[0],s=f.filter(c=>c.date===k),m=x.filter(c=>c.date===k),n=u.filter(c=>c.date===k),v=s.reduce((c,S)=>c+(S.totalAmount||0),0),P=m.reduce((c,S)=>c+S.amount,0)+n.reduce((c,S)=>c+S.amount,0),$=f.reduce((c,S)=>c+(S.totalAmount||0),0),F=h.reduce((c,S)=>c+(S.amount||0),0),E=x.reduce((c,S)=>c+S.amount,0),V=u.reduce((c,S)=>c+S.amount,0),_=$+F,O=$+F-E-V,q=l.reduce((c,S)=>{const Z=S.capitalAccount||{};return c+(Z.initialInvestment||0)+(Z.profitShare||0)-(Z.totalWithdrawn||0)},0),U=2e3,D=Math.max(0,O-U),A=c=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(c||0),i=[{id:"dashboard",name:"Cash Flow",icon:B},{id:"injections",name:"Cash Injections",icon:L},{id:"withdrawals",name:"Withdrawals",icon:Q},{id:"partners",name:"Partners",icon:K}];return e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsx("div",{className:"py-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-6 flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Finance Management"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage cash flow, partner withdrawals, and equity distributions"})]}),e.jsxs("button",{onClick:()=>p(!1),disabled:y,className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",title:"Sync financial data from existing transactions",children:[e.jsx(he,{className:`h-4 w-4 mr-2 ${y?"animate-spin":""}`}),y?"Syncing...":"Sync Data"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(W,{className:"h-8 w-8 text-green-600"})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Cash Position"}),e.jsxs("dd",{children:[e.jsx("div",{className:"text-lg font-medium text-gray-900",children:A(O)}),e.jsxs("div",{className:"text-xs text-gray-500",children:[v>0&&e.jsxs("span",{className:"text-green-600",children:["+",A(v)," in"]}),P>0&&e.jsxs("span",{className:"text-red-600 ml-2",children:["-",A(P)," out"]})]})]})]})})]})})}),e.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(de,{className:"h-8 w-8 text-blue-600"})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Available Distribution"}),e.jsxs("dd",{children:[e.jsx("div",{className:"text-lg font-medium text-gray-900",children:A(D)}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Reserve: ",A(U)]})]})]})})]})})}),e.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(K,{className:"h-8 w-8 text-purple-600"})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Equity"}),e.jsxs("dd",{children:[e.jsx("div",{className:"text-lg font-medium text-gray-900",children:A(q)}),e.jsxs("div",{className:"text-xs text-gray-500",children:[l.length," partner",l.length!==1?"s":""]})]})]})})]})})}),e.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Q,{className:"h-8 w-8 text-orange-600"})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Today's Withdrawals"}),e.jsxs("dd",{children:[e.jsx("div",{className:"text-lg font-medium text-gray-900",children:A(n.reduce((c,S)=>c+S.amount,0))}),e.jsxs("div",{className:"text-xs text-gray-500",children:[n.length," transaction",n.length!==1?"s":""]})]})]})})]})})})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 mb-6",children:[e.jsxs("button",{onClick:()=>g("withdrawals"),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),"Record Withdrawal"]}),e.jsxs("button",{onClick:()=>g("dashboard"),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(me,{className:"h-4 w-4 mr-2"}),"Reconcile Cash"]})]}),e.jsxs("div",{className:"bg-white shadow rounded-lg",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8 px-6","aria-label":"Tabs",children:i.map(c=>{const S=c.icon;return e.jsxs("button",{onClick:()=>g(c.id),className:`
                        whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center justify-center sm:justify-start
                        ${b===c.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
                      `,title:c.name,children:[e.jsx(S,{className:"h-5 w-5 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:c.name})]},c.id)})})}),e.jsxs("div",{className:"p-6",children:[b==="dashboard"&&e.jsx(ge,{currentCashPosition:O,openingBalance:_}),b==="injections"&&e.jsx(Ce,{}),b==="withdrawals"&&e.jsx(ye,{availableCash:D}),b==="partners"&&e.jsx(we,{})]})]})]})})})}export{Oe as default};
