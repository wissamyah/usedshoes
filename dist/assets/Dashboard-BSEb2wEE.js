import{D as F,C as H,P as V,j as e,u as q,r as b,W as z,T as B,a as G}from"./index-BwFdBzJr.js";import{f as D}from"./dateFormatter-DEoQwZ0j.js";import{T as P}from"./trending-up-dSqcZMRN.js";import J from"./SalesChart-CiIrfWkX.js";import Q from"./ExpenseChart-BOulgOaE.js";import X from"./TopProductsChart-Djx4YJWX.js";import{T as Y}from"./trending-down-D_ZjayNe.js";import"./CartesianChart-B-6YGOZP.js";import"./Legend-CgaB6tjr.js";import"./BarChart-ChhbftUk.js";function Z({todaysRevenue:i,monthlyRevenue:l,inventoryValue:d,netProfit:n}){const c=r=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(r||0),u=[{title:"Today's Sales",value:c(i),description:"Revenue today",icon:F,color:"green",bgColor:"bg-green-50",textColor:"text-green-600",iconColor:"text-green-600"},{title:"This Month",value:c(l),description:"Monthly revenue",icon:H,color:"blue",bgColor:"bg-blue-50",textColor:"text-blue-600",iconColor:"text-blue-600"},{title:"Inventory Value",value:c(d),description:"Total stock value",icon:V,color:"purple",bgColor:"bg-purple-50",textColor:"text-purple-600",iconColor:"text-purple-600"},{title:"Net Profit",value:c(n),description:"This month",icon:P,color:n>=0?"emerald":"red",bgColor:n>=0?"bg-emerald-50":"bg-red-50",textColor:n>=0?"text-emerald-600":"text-red-600",iconColor:n>=0?"text-emerald-600":"text-red-600"}];return e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-4 mb-6",children:u.map((r,N)=>{const m=r.icon;return e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:`p-2 rounded-lg ${r.bgColor}`,children:e.jsx(m,{className:`h-6 w-6 ${r.iconColor}`})}),e.jsx("span",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:r.description})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:r.title}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 break-words",children:r.value})]})]})},N)})})}function me(){const{products:i,sales:l,expenses:d,containers:n,cashInjections:c=[],withdrawals:u=[]}=q(),[r,N]=b.useState(!1),m=b.useRef(null),[E,k]=b.useState(0),I=i.reduce((s,t)=>{const O=t.costPerKg||t.costPerUnit||0,K=t.bagWeight||25,L=t.currentStock*K;return s+L*O},0),R=new Date().toISOString().split("T")[0],f=new Date().toISOString().substring(0,7),$=l.filter(s=>s.date===R).reduce((s,t)=>s+(t.totalAmount||0),0),x=l.filter(s=>s.date&&s.date.startsWith(f)),v=x.reduce((s,t)=>s+(t.totalAmount||0),0),A=x.reduce((s,t)=>s+(t.profit||0),0),h=d.filter(s=>s.date&&s.date.startsWith(f)),y=h.reduce((s,t)=>s+(t.amount||0),0),W=A-y,p=l.reduce((s,t)=>s+(t.totalAmount||0),0),g=d.reduce((s,t)=>s+(t.amount||0),0),w=l.reduce((s,t)=>s+(t.profit||0),0)-g,M=n.reduce((s,t)=>s+(t.totalCost||0),0),U=c.reduce((s,t)=>s+(t.amount||0),0),C=u.reduce((s,t)=>s+(t.amount||0),0),j=p+U-g-C,S=l.sort((s,t)=>new Date(`${t.date}T${t.time||"00:00"}`)-new Date(`${s.date}T${s.time||"00:00"}`)).slice(0,5),T=d.sort((s,t)=>new Date(t.date)-new Date(s.date)).slice(0,5),o=i.filter(s=>s.currentStock<10);b.useEffect(()=>{m.current&&k(m.current.scrollHeight)},[o.length]);const a=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(s||0);return e.jsxs("div",{className:"p-4 sm:p-6",children:[e.jsxs("div",{className:"mb-6 sm:mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Overview of your used shoes business performance"})]}),e.jsx(Z,{todaysRevenue:$,monthlyRevenue:v,inventoryValue:I,netProfit:W}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 rounded-lg shadow-lg p-6 mb-6 text-white",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(z,{className:"h-6 w-6 mr-2"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Current Cash Position"}),j>=0?e.jsx(P,{className:"h-5 w-5 ml-auto opacity-90"}):e.jsx(Y,{className:"h-5 w-5 ml-auto opacity-90"})]}),e.jsx("div",{className:"text-3xl font-bold mb-3",children:a(j)}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"opacity-90",children:"Sales Revenue"}),e.jsx("div",{className:"font-semibold",children:a(p)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"opacity-90",children:"Total Purchases"}),e.jsx("div",{className:"font-semibold",children:a(M)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"opacity-90",children:"Expenses"}),e.jsx("div",{className:"font-semibold",children:a(g)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"opacity-90",children:"Withdrawals"}),e.jsx("div",{className:"font-semibold",children:a(C)})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 mb-6 sm:mb-8",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Business Overview"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total Products:"}),e.jsx("span",{className:"font-semibold",children:i.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total Containers:"}),e.jsx("span",{className:"font-semibold",children:n.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total Sales:"}),e.jsx("span",{className:"font-semibold",children:l.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Active Inventory:"}),e.jsxs("span",{className:"font-semibold",children:[i.filter(s=>s.currentStock>0).length," items"]})]}),e.jsxs("div",{className:"flex justify-between border-t pt-2",children:[e.jsx("span",{className:"text-gray-600",children:"Low Stock Items:"}),e.jsx("span",{className:`font-semibold ${o.length>0?"text-orange-600":"text-green-600"}`,children:o.length})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Financial Overview"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total Revenue:"}),e.jsx("span",{className:"font-semibold text-green-600",children:a(p)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total Expenses:"}),e.jsx("span",{className:"font-semibold text-red-600",children:a(g)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Net Profit:"}),e.jsx("span",{className:`font-semibold ${w>=0?"text-green-600":"text-red-600"}`,children:a(w)})]}),e.jsxs("div",{className:"flex justify-between border-t pt-2",children:[e.jsx("span",{className:"text-gray-900 font-medium",children:"Cash Position:"}),e.jsx("span",{className:`font-bold text-lg ${j>=0?"text-blue-600":"text-red-600"}`,children:a(j)})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"This Month"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Sales Count:"}),e.jsx("span",{className:"font-semibold",children:x.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Avg Sale:"}),e.jsx("span",{className:"font-semibold",children:x.length>0?a(v/x.length):a(0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Expense Count:"}),e.jsx("span",{className:"font-semibold",children:h.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Avg Expense:"}),e.jsx("span",{className:"font-semibold",children:h.length>0?a(y/h.length):a(0)})]})]})]})]}),o.length>0&&e.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4 sm:p-6 mb-6 sm:mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between cursor-pointer select-none",onClick:()=>N(!r),children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(B,{className:"h-5 w-5 sm:h-6 sm:w-6 text-orange-600 mr-2"}),e.jsx("h3",{className:"text-base sm:text-lg font-semibold text-orange-900",children:"Low Stock Alert"}),e.jsxs("span",{className:"ml-2 text-sm text-orange-700",children:["(",o.length," items)"]})]}),e.jsx(G,{className:`h-5 w-5 text-orange-600 transform transition-transform duration-300 ease-in-out ${r?"rotate-180":"rotate-0"}`})]}),e.jsx("div",{style:{height:r?E:0,transition:"height 0.3s cubic-bezier(0.4, 0, 0.2, 1)",overflow:"hidden"},children:e.jsxs("div",{ref:m,className:"pt-4",children:[e.jsx("p",{className:"text-orange-700 mb-4 text-sm sm:text-base",children:"The following products have low stock (less than 10 bags):"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:o.map(s=>e.jsxs("div",{className:"bg-white p-3 rounded border border-orange-200",children:[e.jsx("div",{className:"font-medium text-gray-900",children:s.name}),e.jsx("div",{className:"text-sm text-gray-600",children:s.category}),e.jsxs("div",{className:"text-sm font-semibold text-orange-600",children:["Stock: ",s.currentStock," bags"]})]},s.id))})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 sm:gap-8",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"p-4 sm:p-6",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 mb-4",children:"Recent Sales"}),S.length>0?e.jsx("div",{className:"space-y-4",children:S.map(s=>e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100 last:border-b-0",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:s.productName}),e.jsxs("div",{className:"text-sm text-gray-600",children:[s.quantity," units • ",D(s.date)]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-semibold text-green-600",children:a(s.totalAmount)}),e.jsxs("div",{className:"text-sm text-gray-500",children:["+",a(s.profit)," profit"]})]})]},s.id))}):e.jsx("p",{className:"text-gray-500",children:"No sales recorded yet"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"p-4 sm:p-6",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 mb-4",children:"Recent Expenses"}),T.length>0?e.jsx("div",{className:"space-y-4",children:T.map(s=>e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100 last:border-b-0",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:s.description}),e.jsxs("div",{className:"text-sm text-gray-600",children:[s.category," • ",D(s.date)]})]}),e.jsxs("div",{className:"font-semibold text-red-600",children:["-",a(s.amount)]})]},s.id))}):e.jsx("p",{className:"text-gray-500",children:"No expenses recorded yet"})]})})]}),e.jsxs("div",{className:"mt-6 sm:mt-8 space-y-6 sm:space-y-8",children:[e.jsx(J,{}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6 sm:gap-8",children:[e.jsx(Q,{}),e.jsx(X,{})]})]})]})}export{me as default};
