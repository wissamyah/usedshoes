import{c as H,u as _,d as oe,r as y,j as e,X as U,b as re,e as se,D as ne,C as ae}from"./index-DwJYWGdQ.js";import{f as q}from"./dateFormatter-DEoQwZ0j.js";import le from"./SalesForm-BvXQA4q2.js";import{F as ie,C as de}from"./funnel-CnHqkiB3.js";import{S as O}from"./search-Bt5dZTFh.js";import{T as ce}from"./trending-down-wweQeFdw.js";import{T as B}from"./trending-up-DC3ZseJx.js";import{C as A}from"./calendar-BnVbVTnB.js";import{P as pe}from"./pencil-B37vTtb8.js";import{C as xe,a as be,b as ge}from"./chevrons-right-CJYLdckE.js";import{S as L}from"./StatCard-CLPNtjdd.js";import"./Modal-DNmj6vXc.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m15 11-6 6",key:"1toa9n"}],["path",{d:"m9 11 6 6",key:"wlibny"}]],ue=H("clipboard-x",he);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]],fe=H("sliders-horizontal",me);function ye({onEditSale:h}){const{sales:E,deleteSale:F}=_(),{showSuccessMessage:N,showErrorMessage:W,showConfirmDialog:D}=oe(),[p,z]=y.useState(""),[j,S]=y.useState(""),[l,C]=y.useState(""),[i,g]=y.useState(""),[T,v]=y.useState("date"),[x,R]=y.useState("desc"),[o,u]=y.useState(1),[w,P]=y.useState(10),b=E.filter(t=>{const s=!p||t.productName?.toLowerCase().includes(p.toLowerCase())||t.notes?.toLowerCase().includes(p.toLowerCase());let a=!0;if(j)a=t.date===j;else if(l||i){const c=new Date(t.date);if(l&&i){const d=new Date(l),te=new Date(i);a=c>=d&&c<=te}else if(l){const d=new Date(l);a=c>=d}else if(i){const d=new Date(i);a=c<=d}}return s&&a}).sort((t,s)=>{let a,c;switch(T){case"amount":a=t.totalAmount||0,c=s.totalAmount||0;break;case"profit":a=t.profit||0,c=s.profit||0;break;case"date":default:a=new Date(`${t.date}T${t.time||"00:00"}`),c=new Date(`${s.date}T${s.time||"00:00"}`);break}return x==="desc"?c>a?1:-1:a>c?1:-1}),n=b.length,r=Math.ceil(n/w),m=(o-1)*w,$=m+w,M=b.slice(m,$),V=()=>{const s=[],a=[];let c;for(let d=1;d<=r;d++)(d===1||d===r||d>=o-2&&d<=o+2)&&s.push(d);return s.forEach(d=>{c&&(d-c===2?a.push(c+1):d-c!==1&&a.push("...")),a.push(d),c=d}),a},f=t=>{t>=1&&t<=r&&(u(t),window.scrollTo({top:0,behavior:"smooth"}))},X=t=>{z(t),u(1)},I=t=>{P(Number(t)),u(1)},Y=async t=>{if(await D("Delete Sale",`Are you sure you want to delete this sale for ${t.productName}? This will restore ${t.quantity} units to inventory.`))try{await F(t.id),N("Sale Deleted","Sale has been deleted and stock restored")}catch(a){console.error("Delete sale error:",a),W("Delete Failed",a.message||"Failed to delete sale")}},k=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t||0),Q=t=>q(t),G=t=>t?new Date(`2000-01-01T${t}`).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"",J=b.reduce((t,s)=>t+(s.totalAmount||0),0),K=b.reduce((t,s)=>t+(s.profit||0),0),Z=M.reduce((t,s)=>t+(s.totalAmount||0),0),ee=M.reduce((t,s)=>t+(s.profit||0),0);return e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"18px",fontWeight:"500",color:"#ebebeb"},children:"Sales History"}),e.jsxs("p",{style:{fontSize:"14px",color:"#b3b3b3",marginTop:"4px"},children:[b.length," total sales • ",k(J)," total revenue • ",k(K)," total profit"]}),r>1&&e.jsxs("p",{style:{fontSize:"12px",color:"#808080",marginTop:"4px"},children:["Page ",o,": ",M.length," sales • ",k(Z)," revenue • ",k(ee)," profit"]})]})}),e.jsxs("div",{style:{backgroundColor:"#333333",borderRadius:"8px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",border:"1px solid #404040"},className:"overflow-hidden mb-6",children:[e.jsx("div",{style:{backgroundColor:"#2a2a2a",borderBottom:"1px solid #404040"},className:"px-4 sm:px-6 py-3 sm:py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ie,{style:{height:"16px",width:"16px",color:"#b3b3b3"},className:"sm:h-5 sm:w-5"}),e.jsx("h3",{style:{fontSize:"14px",fontWeight:"600",color:"#ebebeb"},className:"sm:text-base",children:"Sales Filters"})]}),(p||j||l||i)&&e.jsxs("button",{onClick:()=>{z(""),S(""),C(""),g(""),u(1)},style:{fontSize:"12px",color:"#808080",backgroundColor:"transparent",border:"none",cursor:"pointer",transition:"color 0.2s"},className:"sm:text-sm flex items-center gap-1",onMouseEnter:t=>{t.target.style.color="#ebebeb"},onMouseLeave:t=>{t.target.style.color="#808080"},children:[e.jsx(U,{style:{height:"12px",width:"12px"},className:"sm:h-4 sm:w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Clear all"})]})]})}),e.jsxs("div",{className:"p-4 sm:p-6 space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(O,{style:{height:"16px",width:"16px",color:"#808080",marginRight:"8px"}}),e.jsx("label",{style:{fontSize:"14px",fontWeight:"500",color:"#b3b3b3"},children:"Search"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(O,{style:{height:"16px",width:"16px",color:"#808080"},className:"sm:h-5 sm:w-5 absolute left-3 top-1/2 -translate-y-1/2"}),e.jsx("input",{type:"text",placeholder:"Search products or notes...",value:p,onChange:t=>X(t.target.value),style:{width:"100%",paddingLeft:"2.25rem",paddingRight:"1rem",paddingTop:"0.5rem",paddingBottom:"0.5rem",border:"1px solid #404040",borderRadius:"8px",fontSize:"14px",backgroundColor:"#1c1c1c",color:"#ebebeb",outline:"none",transition:"border-color 0.2s, box-shadow 0.2s"},className:"sm:py-2.5 sm:pl-10",onFocus:t=>{t.target.style.borderColor="#22c55e",t.target.style.boxShadow="0 0 0 3px rgba(34, 197, 94, 0.1)"},onBlur:t=>{t.target.style.borderColor="#404040",t.target.style.boxShadow="none"}})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(fe,{style:{height:"16px",width:"16px",color:"#808080",marginRight:"8px"}}),e.jsx("label",{style:{fontSize:"14px",fontWeight:"500",color:"#b3b3b3"},children:"Sort Options"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs("select",{value:T,onChange:t=>v(t.target.value),style:{flex:1,padding:"0.5rem 0.75rem",border:"1px solid #404040",borderRadius:"8px",fontSize:"14px",backgroundColor:"#1c1c1c",color:"#ebebeb",outline:"none",transition:"border-color 0.2s, box-shadow 0.2s"},className:"sm:py-2.5",onFocus:t=>{t.target.style.borderColor="#22c55e",t.target.style.boxShadow="0 0 0 3px rgba(34, 197, 94, 0.1)"},onBlur:t=>{t.target.style.borderColor="#404040",t.target.style.boxShadow="none"},children:[e.jsx("option",{value:"date",children:"Sort by Date"}),e.jsx("option",{value:"amount",children:"Sort by Amount"}),e.jsx("option",{value:"profit",children:"Sort by Profit"})]}),e.jsx("button",{onClick:()=>R(x==="desc"?"asc":"desc"),style:{padding:"0.5rem 1rem",border:"1px solid #404040",borderRadius:"8px",fontWeight:"500",fontSize:"14px",backgroundColor:x==="desc"?"rgba(34, 197, 94, 0.1)":"rgba(59, 130, 246, 0.1)",color:x==="desc"?"#22c55e":"#3b82f6",cursor:"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},className:"sm:py-2.5",title:`Sort ${x==="desc"?"ascending":"descending"}`,onMouseEnter:t=>{t.target.style.backgroundColor=x==="desc"?"rgba(34, 197, 94, 0.2)":"rgba(59, 130, 246, 0.2)"},onMouseLeave:t=>{t.target.style.backgroundColor=x==="desc"?"rgba(34, 197, 94, 0.1)":"rgba(59, 130, 246, 0.1)"},children:x==="desc"?e.jsxs(e.Fragment,{children:[e.jsx(ce,{style:{height:"16px",width:"16px"}}),e.jsx("span",{children:"Descending"})]}):e.jsxs(e.Fragment,{children:[e.jsx(B,{style:{height:"16px",width:"16px"}}),e.jsx("span",{children:"Ascending"})]})})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(A,{style:{height:"16px",width:"16px",color:"#808080",marginRight:"8px"}}),e.jsx("label",{style:{fontSize:"14px",fontWeight:"500",color:"#b3b3b3"},children:"Date Range"})]}),e.jsxs("div",{style:{backgroundColor:"#1c1c1c",borderRadius:"8px",padding:"12px 16px"},children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("label",{htmlFor:"startDate",style:{display:"block",fontSize:"12px",fontWeight:"500",color:"#b3b3b3",marginBottom:"6px"},children:"From"}),e.jsxs("div",{className:"relative",children:[e.jsx(A,{style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",height:"16px",width:"16px",color:"#808080"}}),e.jsx("input",{type:"date",id:"startDate",value:l,onChange:t=>{C(t.target.value),S(""),u(1)},style:{width:"100%",paddingLeft:"2.5rem",paddingRight:"12px",paddingTop:"8px",paddingBottom:"8px",border:"1px solid #404040",borderRadius:"8px",backgroundColor:"#2a2a2a",color:"#ebebeb",fontSize:"14px",outline:"none",transition:"border-color 0.2s, box-shadow 0.2s"},onFocus:t=>{t.target.style.borderColor="#22c55e",t.target.style.boxShadow="0 0 0 3px rgba(34, 197, 94, 0.1)"},onBlur:t=>{t.target.style.borderColor="#404040",t.target.style.boxShadow="none"}})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{htmlFor:"endDate",style:{display:"block",fontSize:"12px",fontWeight:"500",color:"#b3b3b3",marginBottom:"6px"},children:"To"}),e.jsxs("div",{className:"relative",children:[e.jsx(A,{style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",height:"16px",width:"16px",color:"#808080"}}),e.jsx("input",{type:"date",id:"endDate",value:i,onChange:t=>{g(t.target.value),S(""),u(1)},style:{width:"100%",paddingLeft:"2.5rem",paddingRight:"12px",paddingTop:"8px",paddingBottom:"8px",border:"1px solid #404040",borderRadius:"8px",backgroundColor:"#2a2a2a",color:"#ebebeb",fontSize:"14px",outline:"none",transition:"border-color 0.2s, box-shadow 0.2s"},onFocus:t=>{t.target.style.borderColor="#22c55e",t.target.style.boxShadow="0 0 0 3px rgba(34, 197, 94, 0.1)"},onBlur:t=>{t.target.style.borderColor="#404040",t.target.style.boxShadow="none"}})]})]})]}),(l||i)&&e.jsxs("button",{onClick:()=>{C(""),g(""),u(1)},style:{marginTop:"12px",fontSize:"14px",color:"#22c55e",fontWeight:"500",backgroundColor:"transparent",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",transition:"color 0.2s"},onMouseEnter:t=>{t.target.style.color="#16a34a"},onMouseLeave:t=>{t.target.style.color="#22c55e"},children:[e.jsx(U,{style:{height:"12px",width:"12px"}}),"Clear date range"]})]})]}),(p||l||i)&&e.jsx("div",{style:{backgroundColor:"rgba(34, 197, 94, 0.1)",borderRadius:"8px",padding:"12px 16px",border:"1px solid rgba(34, 197, 94, 0.3)"},children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[e.jsxs("div",{style:{fontSize:"12px",fontWeight:"500",color:"#b3b3b3"},className:"sm:text-sm",children:["Active Filters:",p&&e.jsxs("span",{style:{marginLeft:"8px",padding:"4px 8px",backgroundColor:"#2a2a2a",borderRadius:"6px",color:"#22c55e",border:"1px solid rgba(34, 197, 94, 0.3)"},children:['Search: "',p,'"']}),(l||i)&&e.jsx("span",{style:{marginLeft:"8px",padding:"4px 8px",backgroundColor:"#2a2a2a",borderRadius:"6px",color:"#22c55e",border:"1px solid rgba(34, 197, 94, 0.3)"},children:l&&i?`${l} to ${i}`:l?`From ${l}`:`Until ${i}`})]}),e.jsxs("div",{style:{fontSize:"12px",color:"#808080"},className:"sm:text-sm",children:[b.length," results"]})]})})]})]}),b.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{overflowX:"auto",borderTopLeftRadius:"8px",borderTopRightRadius:"8px",border:"1px solid #404040",borderBottom:0},children:e.jsxs("table",{style:{minWidth:"100%",borderCollapse:"separate",borderSpacing:0},children:[e.jsx("thead",{style:{backgroundColor:"#333333"},children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:"12px 24px",textAlign:"left",fontSize:"12px",fontWeight:"500",color:"#b3b3b3",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Date & Time"}),e.jsx("th",{style:{padding:"12px 24px",textAlign:"left",fontSize:"12px",fontWeight:"500",color:"#b3b3b3",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Product"}),e.jsx("th",{style:{padding:"12px 24px",textAlign:"left",fontSize:"12px",fontWeight:"500",color:"#b3b3b3",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Quantity"}),e.jsx("th",{style:{padding:"12px 24px",textAlign:"left",fontSize:"12px",fontWeight:"500",color:"#b3b3b3",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Price/Unit"}),e.jsx("th",{style:{padding:"12px 24px",textAlign:"left",fontSize:"12px",fontWeight:"500",color:"#b3b3b3",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Total"}),e.jsx("th",{style:{padding:"12px 24px",textAlign:"left",fontSize:"12px",fontWeight:"500",color:"#b3b3b3",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Profit"}),e.jsx("th",{style:{padding:"12px 24px",textAlign:"left",fontSize:"12px",fontWeight:"500",color:"#b3b3b3",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Actions"})]})}),e.jsx("tbody",{style:{backgroundColor:"#2a2a2a"},children:M.map(t=>e.jsxs("tr",{style:{borderBottom:"1px solid #404040",transition:"background-color 0.2s"},onMouseEnter:s=>{s.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.05)"},onMouseLeave:s=>{s.currentTarget.style.backgroundColor="transparent"},children:[e.jsx("td",{style:{padding:"16px 24px",whiteSpace:"nowrap",fontSize:"14px",color:"#ebebeb"},children:e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"500"},children:Q(t.date)}),e.jsx("div",{style:{color:"#b3b3b3"},children:G(t.time)})]})}),e.jsxs("td",{style:{padding:"16px 24px",whiteSpace:"nowrap"},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"500",color:"#ebebeb"},children:t.productName}),t.notes&&e.jsx("div",{style:{fontSize:"14px",color:"#b3b3b3",textOverflow:"ellipsis",overflow:"hidden",maxWidth:"300px"},title:t.notes,children:t.notes})]}),e.jsx("td",{style:{padding:"16px 24px",whiteSpace:"nowrap",fontSize:"14px",color:"#ebebeb"},children:t.quantity}),e.jsx("td",{style:{padding:"16px 24px",whiteSpace:"nowrap",fontSize:"14px",color:"#ebebeb"},children:k(t.pricePerUnit)}),e.jsx("td",{style:{padding:"16px 24px",whiteSpace:"nowrap",fontSize:"14px",fontWeight:"500",color:"#ebebeb"},children:k(t.totalAmount)}),e.jsx("td",{style:{padding:"16px 24px",whiteSpace:"nowrap",fontSize:"14px",fontWeight:"500"},children:e.jsx("span",{style:{color:t.profit>0?"#22c55e":"#ef4444"},children:k(t.profit)})}),e.jsx("td",{style:{padding:"16px 24px",whiteSpace:"nowrap",fontSize:"14px",fontWeight:"500"},children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>h(t),style:{color:"#3b82f6",padding:"4px",borderRadius:"6px",backgroundColor:"transparent",border:"none",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:s=>{s.target.style.backgroundColor="rgba(59, 130, 246, 0.1)",s.target.style.color="#2563eb"},onMouseLeave:s=>{s.target.style.backgroundColor="transparent",s.target.style.color="#3b82f6"},title:"Edit sale",children:e.jsx(pe,{style:{height:"16px",width:"16px"}})}),e.jsx("button",{onClick:()=>Y(t),style:{color:"#ef4444",padding:"4px",borderRadius:"6px",backgroundColor:"transparent",border:"none",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:s=>{s.target.style.backgroundColor="rgba(239, 68, 68, 0.1)",s.target.style.color="#dc2626"},onMouseLeave:s=>{s.target.style.backgroundColor="transparent",s.target.style.color="#ef4444"},title:"Delete sale",children:e.jsx(re,{style:{height:"16px",width:"16px"}})})]})})]},t.id))})]})}),r>1&&e.jsxs("div",{style:{backgroundColor:"#1c1c1c",padding:"12px 16px",borderTop:"1px solid #404040",borderBottomLeftRadius:"8px",borderBottomRightRadius:"8px"},children:[e.jsxs("div",{className:"sm:hidden",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{style:{fontSize:"14px",color:"#b3b3b3"},children:["Page ",o," of ",r]}),e.jsxs("select",{value:w,onChange:t=>I(t.target.value),style:{padding:"4px 8px",fontSize:"14px",border:"1px solid #404040",borderRadius:"4px",backgroundColor:"#1c1c1c",color:"#ebebeb"},children:[e.jsx("option",{value:"5",children:"5/page"}),e.jsx("option",{value:"10",children:"10/page"}),e.jsx("option",{value:"20",children:"20/page"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("button",{onClick:()=>f(o-1),disabled:o===1,style:{padding:"8px 12px",fontSize:"14px",fontWeight:"500",color:o===1?"#808080":"#ebebeb",backgroundColor:"#2a2a2a",border:"1px solid #404040",borderRadius:"6px",opacity:o===1?.5:1,cursor:o===1?"not-allowed":"pointer"},children:"Previous"}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{onClick:()=>f(1),style:{padding:"4px 8px",fontSize:"14px",borderRadius:"4px",backgroundColor:o===1?"#3b82f6":"transparent",color:o===1?"white":"#ebebeb",border:"none",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:t=>{o!==1&&(t.target.style.backgroundColor="rgba(255, 255, 255, 0.1)")},onMouseLeave:t=>{o!==1&&(t.target.style.backgroundColor="transparent")},children:"1"}),o>3&&e.jsx("span",{style:{padding:"4px",color:"#b3b3b3"},children:"..."}),o>2&&o<r-1&&e.jsx("button",{onClick:()=>f(o),style:{padding:"4px 8px",fontSize:"14px",backgroundColor:"#3b82f6",color:"white",borderRadius:"4px",border:"none",cursor:"pointer"},children:o}),o<r-2&&e.jsx("span",{style:{padding:"4px",color:"#b3b3b3"},children:"..."}),r>1&&e.jsx("button",{onClick:()=>f(r),style:{padding:"4px 8px",fontSize:"14px",borderRadius:"4px",backgroundColor:o===r?"#3b82f6":"transparent",color:o===r?"white":"#ebebeb",border:"none",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:t=>{o!==r&&(t.target.style.backgroundColor="rgba(255, 255, 255, 0.1)")},onMouseLeave:t=>{o!==r&&(t.target.style.backgroundColor="transparent")},children:r})]}),e.jsx("button",{onClick:()=>f(o+1),disabled:o===r,style:{padding:"8px 12px",fontSize:"14px",fontWeight:"500",color:o===r?"#808080":"#ebebeb",backgroundColor:"#2a2a2a",border:"1px solid #404040",borderRadius:"6px",opacity:o===r?.5:1,cursor:o===r?"not-allowed":"pointer"},children:"Next"})]}),e.jsxs("div",{style:{textAlign:"center",fontSize:"12px",color:"#b3b3b3",marginTop:"8px"},children:[m+1,"-",Math.min($,n)," of ",n]})]}),e.jsxs("div",{className:"hidden sm:flex sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("label",{style:{fontSize:"14px",color:"#ebebeb"},children:"Show:"}),e.jsxs("select",{value:w,onChange:t=>I(t.target.value),style:{padding:"4px 8px",fontSize:"14px",border:"1px solid #404040",borderRadius:"4px",backgroundColor:"#2a2a2a",color:"#ebebeb",outline:"none"},onFocus:t=>{t.target.style.borderColor="#3b82f6",t.target.style.boxShadow="0 0 0 2px rgba(59, 130, 246, 0.2)"},onBlur:t=>{t.target.style.borderColor="#404040",t.target.style.boxShadow="none"},children:[e.jsx("option",{value:"5",children:"5"}),e.jsx("option",{value:"10",children:"10"}),e.jsx("option",{value:"20",children:"20"}),e.jsx("option",{value:"50",children:"50"}),e.jsx("option",{value:"100",children:"100"})]}),e.jsx("span",{style:{fontSize:"14px",color:"#ebebeb"},children:"per page"})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("button",{onClick:()=>f(1),disabled:o===1,style:{padding:"6px",borderRadius:"4px",backgroundColor:"transparent",border:"none",opacity:o===1?.5:1,cursor:o===1?"not-allowed":"pointer",transition:"background-color 0.2s"},onMouseEnter:t=>{o!==1&&(t.target.style.backgroundColor="rgba(255, 255, 255, 0.1)")},onMouseLeave:t=>{t.target.style.backgroundColor="transparent"},title:"First page",children:e.jsx(xe,{style:{height:"16px",width:"16px",color:"#b3b3b3"}})}),e.jsx("button",{onClick:()=>f(o-1),disabled:o===1,style:{padding:"6px",borderRadius:"4px",backgroundColor:"transparent",border:"none",opacity:o===1?.5:1,cursor:o===1?"not-allowed":"pointer",transition:"background-color 0.2s"},onMouseEnter:t=>{o!==1&&(t.target.style.backgroundColor="rgba(255, 255, 255, 0.1)")},onMouseLeave:t=>{t.target.style.backgroundColor="transparent"},title:"Previous page",children:e.jsx(be,{style:{height:"16px",width:"16px",color:"#b3b3b3"}})}),e.jsx("div",{className:"flex items-center space-x-1 mx-2",children:V().map((t,s)=>t==="..."?e.jsx("span",{style:{padding:"8px",fontSize:"14px",color:"#b3b3b3"},children:"..."},`dots-${s}`):e.jsx("button",{onClick:()=>f(t),style:{padding:"8px 12px",fontSize:"14px",borderRadius:"4px",backgroundColor:o===t?"#3b82f6":"transparent",color:o===t?"white":"#ebebeb",border:"none",cursor:"pointer",transition:"background-color 0.2s"},onMouseEnter:a=>{o!==t&&(a.target.style.backgroundColor="#333333")},onMouseLeave:a=>{o!==t&&(a.target.style.backgroundColor="transparent")},children:t},t))}),e.jsx("button",{onClick:()=>f(o+1),disabled:o===r,style:{padding:"6px",borderRadius:"4px",backgroundColor:"transparent",border:"none",opacity:o===r?.5:1,cursor:o===r?"not-allowed":"pointer",transition:"background-color 0.2s"},onMouseEnter:t=>{o!==r&&(t.target.style.backgroundColor="rgba(255, 255, 255, 0.1)")},onMouseLeave:t=>{t.target.style.backgroundColor="transparent"},title:"Next page",children:e.jsx(de,{style:{height:"16px",width:"16px",color:"#b3b3b3"}})}),e.jsx("button",{onClick:()=>f(r),disabled:o===r,style:{padding:"6px",borderRadius:"4px",backgroundColor:"transparent",border:"none",opacity:o===r?.5:1,cursor:o===r?"not-allowed":"pointer",transition:"background-color 0.2s"},onMouseEnter:t=>{o!==r&&(t.target.style.backgroundColor="rgba(255, 255, 255, 0.1)")},onMouseLeave:t=>{t.target.style.backgroundColor="transparent"},title:"Last page",children:e.jsx(ge,{style:{height:"16px",width:"16px",color:"#b3b3b3"}})})]}),e.jsxs("div",{style:{fontSize:"14px",color:"#ebebeb"},children:["Showing ",m+1," to ",Math.min($,n)," of ",n," results"]})]})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ue,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Sales Found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:p||j?"No sales match your current filters.":"No sales recorded."}),(p||j||l||i)&&e.jsx("button",{onClick:()=>{z(""),S(""),C(""),g(""),u(1)},className:"text-green-600 hover:text-green-500",children:"Clear filters"})]})]})}function Le(){const{sales:h,products:E}=_(),[F,N]=y.useState(!1),[W,D]=y.useState(null),p=h.length>0?h.reduce((n,r)=>{const m=new Date(r.date);return m>n?m:n},new Date(h[0].date)):new Date,z=new Date().toISOString().split("T")[0],j=p.toISOString().split("T")[0],S=h.filter(n=>n.date===z),l=S.length>0?S:h.filter(n=>n.date===j),C=S.length>0?"Today":`Latest (${q(j)})`,i=l.reduce((n,r)=>n+(r.totalAmount||0),0),g=l.reduce((n,r)=>n+(r.profit||0),0),T=new Date().toISOString().substring(0,7);let v=h.filter(n=>n.date&&n.date.startsWith(T)),x="This Month";if(v.length===0&&h.length>0){const n=p.toISOString().substring(0,7);v=h.filter(m=>m.date&&m.date.startsWith(n)),x=new Date(n+"-01").toLocaleDateString("en-US",{month:"long",year:"numeric"})}const R=v.reduce((n,r)=>n+(r.totalAmount||0),0),o=v.reduce((n,r)=>n+(r.profit||0),0),u=()=>{D(null),N(!0)},w=n=>{D(n),N(!0)},P=()=>{N(!1),D(null)},b=n=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(n||0);return e.jsxs("div",{className:"py-6 sm:p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"24px",fontWeight:"bold",color:"#ebebeb"},children:"Sales Management"}),e.jsx("p",{style:{fontSize:"14px",color:"#b3b3b3",marginTop:"4px"},children:"Record sales, track revenue and manage transactions"})]}),e.jsxs("button",{onClick:u,className:"inline-flex items-center justify-center w-12 h-12 sm:w-auto sm:h-auto sm:px-4 sm:py-2 bg-green-600 text-white text-sm font-medium rounded-lg sm:rounded-md shadow-sm hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 touch-manipulation",children:[e.jsx(se,{className:"h-6 w-6 sm:h-4 sm:w-4 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Record Sale"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[e.jsx(L,{title:`${C}'s Revenue`,value:b(i),subtitle:`${l.length} transactions`,icon:ne,iconBgColor:"bg-green-100",iconColor:"text-green-600",trend:i>0?"up":null}),e.jsx(L,{title:`${C}'s Profit`,value:b(g),subtitle:i>0?`${(g/i*100).toFixed(1)}% margin`:"0% margin",icon:B,iconBgColor:g>=0?"bg-blue-100":"bg-red-100",iconColor:g>=0?"text-blue-600":"text-red-600",trend:g>0?"up":g<0?"down":null}),e.jsx(L,{title:`${x} Revenue`,value:b(R),subtitle:`${v.length} transactions`,icon:ae,iconBgColor:"bg-purple-100",iconColor:"text-purple-600"}),e.jsx(L,{title:`${x} Profit`,value:b(o),subtitle:R>0?`${(o/R*100).toFixed(1)}% margin`:"0% margin",icon:B,iconBgColor:o>=0?"bg-orange-100":"bg-red-100",iconColor:o>=0?"text-orange-600":"text-red-600",trend:o>0?"up":o<0?"down":null})]}),e.jsx("div",{style:{backgroundColor:"#2a2a2a",borderRadius:"8px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",border:"1px solid #404040"},children:e.jsx(ye,{onEditSale:w})}),F&&e.jsx(le,{sale:W,onClose:P})]})}export{Le as default};
