import{u as z,r as S,j as e,D as M,P as B,R as O,h as U,X as W,f as Y,d as V}from"./index-DzAdPBXS.js";import{T as P}from"./trending-up-XsFX2xiO.js";import{T as q}from"./trending-down-bocO1TUr.js";import{f as w}from"./dateFormatter-DEoQwZ0j.js";import{U as G}from"./users-C6TvGbAv.js";import{C as T}from"./calendar-Dgc-HZGu.js";import{S as k}from"./StatCard-BSrzJx1w.js";import{F as Q}from"./file-text-Cp-ZW65H.js";import{F as H,C as X}from"./funnel-DpEE9LkM.js";function _(s){return s.reduce((l,t)=>l+(t.costPerUnit||0)*(t.quantity||0),0)}function F(s){return s.reduce((l,t)=>l+(t.totalAmount||0),0)}function A(s){return s.reduce((l,t)=>l+(t.profit||0),0)}function L(s){return s.reduce((l,t)=>l+(t.amount||0),0)}function K(s,l){const t=A(s),a=L(l);return t-a}function J(s,l){const t=F(s),a=A(s),p=K(s,l);return{grossMargin:t>0?a/t*100:0,netMargin:t>0?p/t*100:0}}function Z(s){return s.reduce((l,t)=>{const a=(t.costPerKg||t.costPerUnit||0)*(t.bagWeight||25);return l+t.currentStock*a},0)}function $(s,l,t){return!l&&!t?s:s.filter(a=>{const p=a.date;if(!p)return!1;const x=!l||p>=l,u=!t||p<=t;return x&&u})}function R(s,l,t,a=null,p=null){const x=$(s,a,p),u=$(l,a,p),m=F(x),f=_(x),c=A(x),o=L(u),r=c-o,n=J(x,u),i=x.length>0?m/x.length:0,d=u.length>0?o/u.length:0,h=u.reduce((g,y)=>{const b=y.category||"Miscellaneous";return g[b]=(g[b]||0)+y.amount,g},{}),j=x.reduce((g,y)=>{const b=y.productId;return g[b]||(g[b]={productName:y.productName,quantity:0,revenue:0,profit:0,salesCount:0}),g[b].quantity+=y.quantity||0,g[b].revenue+=y.totalAmount||0,g[b].profit+=y.profit||0,g[b].salesCount+=1,g},{});return{startDate:a,endDate:p,salesCount:x.length,expensesCount:u.length,revenue:m,cogs:f,grossProfit:c,totalExpenses:o,netProfit:r,grossMargin:n.grossMargin,netMargin:n.netMargin,averageSaleAmount:i,averageExpenseAmount:d,expensesByCategory:h,salesByProduct:Object.values(j).sort((g,y)=>y.revenue-g.revenue),inventoryValue:Z(t)}}function ee(s=null,l=null){const{sales:t,expenses:a,products:p}=z(),x=S.useMemo(()=>R(t,a,p,s,l),[t,a,p,s,l]);return{report:x,formatCurrency:r=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(r||0),formatPercentage:r=>`${(r||0).toFixed(1)}%`,formatDate:r=>r?new Date(r).toLocaleDateString():null,getDateRanges:()=>{const r=new Date,n=r.toISOString().substring(0,7),i=new Date(r.getFullYear(),r.getMonth()-1,1).toISOString().split("T")[0],d=new Date(r.getFullYear(),r.getMonth(),0).toISOString().split("T")[0],h=`${r.getFullYear()}-01-01`,j=`${r.getFullYear()-1}-01-01`,g=`${r.getFullYear()-1}-12-31`;return{today:{label:"Today",startDate:r.toISOString().split("T")[0],endDate:r.toISOString().split("T")[0]},thisMonth:{label:"This Month",startDate:n+"-01",endDate:r.toISOString().split("T")[0]},lastMonth:{label:"Last Month",startDate:i,endDate:d},thisYear:{label:"This Year",startDate:h,endDate:r.toISOString().split("T")[0]},lastYear:{label:"Last Year",startDate:j,endDate:g},allTime:{label:"All Time",startDate:null,endDate:null}}},getPerformanceIndicators:()=>{const r=[];return x.netMargin>20?r.push({type:"success",message:"Excellent profit margin"}):x.netMargin>10?r.push({type:"info",message:"Good profit margin"}):x.netMargin>0?r.push({type:"warning",message:"Low profit margin"}):r.push({type:"error",message:"Operating at a loss"}),x.salesCount===0&&r.push({type:"warning",message:"No sales in selected period"}),x.inventoryValue>x.revenue*2&&r.push({type:"warning",message:"High inventory relative to sales"}),r},isProfit:x.netProfit>0,isProfitable:x.netMargin>0,hasRevenue:x.revenue>0,hasExpenses:x.totalExpenses>0,compareWith:(r,n)=>{const i=R(t,a,p,r,n);return{revenue:{current:x.revenue,previous:i.revenue,change:x.revenue-i.revenue,percentageChange:i.revenue>0?(x.revenue-i.revenue)/i.revenue*100:0},netProfit:{current:x.netProfit,previous:i.netProfit,change:x.netProfit-i.netProfit,percentageChange:i.netProfit!==0?(x.netProfit-i.netProfit)/Math.abs(i.netProfit)*100:0}}}}}function te({startDate:s,endDate:l}){const{report:t,formatCurrency:a,formatPercentage:p,formatDate:x,getPerformanceIndicators:u}=ee(s,l),m=u(),f=()=>!s&&!l?"All Time":s&&l?s===l?x(s):`${x(s)} - ${x(l)}`:s?`From ${x(s)}`:l?`Until ${x(l)}`:"All Time";return e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:[e.jsxs("div",{style:{backgroundColor:"#2a2a2a",borderRadius:"12px",border:"1px solid #404040",padding:"24px"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{style:{fontSize:"20px",fontWeight:"600",color:"#ebebeb"},children:"Profit & Loss Statement"}),e.jsx("span",{style:{fontSize:"14px",color:"#b3b3b3",backgroundColor:"#1c1c1c",padding:"6px 12px",borderRadius:"6px",border:"1px solid #404040"},children:f()})]}),m.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:m.map((c,o)=>e.jsx("span",{style:{display:"inline-flex",alignItems:"center",padding:"4px 10px",borderRadius:"9999px",fontSize:"12px",fontWeight:"500",backgroundColor:c.type==="success"?"rgba(34, 197, 94, 0.1)":c.type==="warning"?"rgba(245, 158, 11, 0.1)":c.type==="error"?"rgba(239, 68, 68, 0.1)":"rgba(59, 130, 246, 0.1)",color:c.type==="success"?"#22c55e":c.type==="warning"?"#f59e0b":c.type==="error"?"#ef4444":"#3b82f6",border:`1px solid ${c.type==="success"?"rgba(34, 197, 94, 0.3)":c.type==="warning"?"rgba(245, 158, 11, 0.3)":c.type==="error"?"rgba(239, 68, 68, 0.3)":"rgba(59, 130, 246, 0.3)"}`},children:c.message},o))})]}),e.jsxs("div",{style:{backgroundColor:"#2a2a2a",borderRadius:"12px",border:"1px solid #404040",overflow:"hidden"},children:[e.jsx("div",{style:{backgroundColor:"#333333",padding:"24px"},children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"20px",fontWeight:"600",color:"#ebebeb"},children:"Income Statement"}),e.jsxs("p",{style:{fontSize:"14px",color:"#b3b3b3",marginTop:"4px"},children:["For the period: ",f()]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[t.netProfit>=0?e.jsx(P,{style:{height:"20px",width:"20px",color:"#22c55e"}}):e.jsx(q,{style:{height:"20px",width:"20px",color:"#ef4444"}}),e.jsx("span",{style:{fontSize:"24px",fontWeight:"700",color:t.netProfit>=0?"#22c55e":"#ef4444"},children:a(t.netProfit)})]}),e.jsx("p",{style:{fontSize:"12px",color:"#b3b3b3",marginTop:"4px"},children:"Net Income"})]})]})}),e.jsx("div",{style:{padding:"24px"},children:e.jsx("table",{style:{width:"100%"},children:e.jsxs("tbody",{children:[e.jsx("tr",{style:{borderBottom:"1px solid #404040"},children:e.jsx("td",{style:{paddingTop:"12px",paddingBottom:"12px"},colSpan:"3",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(M,{style:{height:"16px",width:"16px",color:"#22c55e"}}),e.jsx("span",{style:{fontWeight:"600",color:"#ebebeb",textTransform:"uppercase",fontSize:"14px",letterSpacing:"0.05em"},children:"Revenue"})]})})}),e.jsxs("tr",{style:{transition:"background-color 0.2s"},onMouseEnter:c=>{c.currentTarget.style.backgroundColor="#333333"},onMouseLeave:c=>{c.currentTarget.style.backgroundColor="transparent"},children:[e.jsx("td",{style:{paddingTop:"8px",paddingBottom:"8px",paddingLeft:"32px",color:"#b3b3b3"},children:"Sales Revenue"}),e.jsxs("td",{style:{textAlign:"right",color:"#808080",fontSize:"14px"},children:[t.salesCount," transactions"]}),e.jsx("td",{style:{textAlign:"right",fontWeight:"500",color:"#ebebeb",width:"128px"},children:a(t.revenue)})]}),e.jsxs("tr",{style:{borderBottom:"2px solid #404040"},children:[e.jsx("td",{style:{paddingTop:"8px",paddingBottom:"12px",fontWeight:"600",color:"#ebebeb"},colSpan:"2",children:"Total Revenue"}),e.jsx("td",{style:{paddingTop:"8px",paddingBottom:"12px",textAlign:"right",fontWeight:"700",color:"#ebebeb"},children:a(t.revenue)})]}),e.jsx("tr",{style:{borderBottom:"1px solid #404040"},children:e.jsx("td",{style:{paddingTop:"12px",paddingBottom:"12px"},colSpan:"3",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(B,{style:{height:"16px",width:"16px",color:"#fb923c"}}),e.jsx("span",{style:{fontWeight:"600",color:"#ebebeb",textTransform:"uppercase",fontSize:"14px",letterSpacing:"0.05em"},children:"Cost of Goods Sold"})]})})}),e.jsxs("tr",{style:{transition:"background-color 0.2s"},onMouseEnter:c=>{c.currentTarget.style.backgroundColor="#333333"},onMouseLeave:c=>{c.currentTarget.style.backgroundColor="transparent"},children:[e.jsx("td",{style:{paddingTop:"8px",paddingBottom:"8px",paddingLeft:"32px",color:"#b3b3b3"},children:"Product Costs"}),e.jsxs("td",{style:{textAlign:"right",color:"#808080",fontSize:"14px"},children:[t.salesCount," units"]}),e.jsxs("td",{style:{textAlign:"right",fontWeight:"500",color:"#f87171",width:"128px"},children:["(",a(t.cogs),")"]})]}),e.jsxs("tr",{style:{borderBottom:"2px solid #404040"},children:[e.jsx("td",{style:{paddingTop:"8px",paddingBottom:"12px",fontWeight:"600",color:"#ebebeb"},colSpan:"2",children:"Total COGS"}),e.jsxs("td",{style:{paddingTop:"8px",paddingBottom:"12px",textAlign:"right",fontWeight:"700",color:"#f87171"},children:["(",a(t.cogs),")"]})]}),e.jsxs("tr",{style:{backgroundColor:"#333333"},children:[e.jsxs("td",{style:{paddingTop:"12px",paddingBottom:"12px",paddingLeft:"16px",fontWeight:"700",color:"#ebebeb"},colSpan:"2",children:["GROSS PROFIT",e.jsxs("span",{style:{marginLeft:"8px",fontSize:"14px",fontWeight:"400",color:"#b3b3b3"},children:["(",p(t.grossMargin)," margin)"]})]}),e.jsx("td",{style:{paddingTop:"12px",paddingBottom:"12px",paddingRight:"16px",textAlign:"right",fontWeight:"700",fontSize:"18px",color:t.grossProfit>=0?"#22c55e":"#ef4444"},children:a(t.grossProfit)})]}),e.jsx("tr",{style:{borderBottom:"1px solid #404040"},children:e.jsx("td",{style:{paddingTop:"12px",paddingBottom:"12px"},colSpan:"3",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(O,{style:{height:"16px",width:"16px",color:"#ef4444"}}),e.jsx("span",{style:{fontWeight:"600",color:"#ebebeb",textTransform:"uppercase",fontSize:"14px",letterSpacing:"0.05em"},children:"Operating Expenses"})]})})}),Object.entries(t.expensesByCategory).length>0?Object.entries(t.expensesByCategory).sort(([,c],[,o])=>o-c).map(([c,o])=>e.jsxs("tr",{style:{transition:"background-color 0.2s"},onMouseEnter:r=>{r.currentTarget.style.backgroundColor="#333333"},onMouseLeave:r=>{r.currentTarget.style.backgroundColor="transparent"},children:[e.jsx("td",{style:{paddingTop:"8px",paddingBottom:"8px",paddingLeft:"32px",color:"#b3b3b3"},children:c}),e.jsxs("td",{style:{textAlign:"right",color:"#808080",fontSize:"14px"},children:[p(o/t.totalExpenses*100)," of expenses"]}),e.jsxs("td",{style:{textAlign:"right",fontWeight:"500",color:"#f87171",width:"128px"},children:["(",a(o),")"]})]},c)):e.jsxs("tr",{style:{transition:"background-color 0.2s"},onMouseEnter:c=>{c.currentTarget.style.backgroundColor="#333333"},onMouseLeave:c=>{c.currentTarget.style.backgroundColor="transparent"},children:[e.jsx("td",{style:{paddingTop:"8px",paddingBottom:"8px",paddingLeft:"32px",color:"#b3b3b3"},children:"No expenses recorded"}),e.jsx("td",{style:{textAlign:"right",color:"#808080",fontSize:"14px"},children:"-"}),e.jsx("td",{style:{textAlign:"right",fontWeight:"500",color:"#ebebeb",width:"128px"},children:"$0.00"})]}),e.jsxs("tr",{style:{borderBottom:"2px solid #404040"},children:[e.jsxs("td",{style:{paddingTop:"8px",paddingBottom:"12px",fontWeight:"600",color:"#ebebeb"},colSpan:"2",children:["Total Operating Expenses",e.jsxs("span",{style:{marginLeft:"8px",fontSize:"14px",fontWeight:"400",color:"#b3b3b3"},children:["(",t.expensesCount," expenses)"]})]}),e.jsxs("td",{style:{paddingTop:"8px",paddingBottom:"12px",textAlign:"right",fontWeight:"700",color:"#f87171"},children:["(",a(t.totalExpenses),")"]})]}),e.jsxs("tr",{style:{backgroundColor:"#333333"},children:[e.jsx("td",{style:{paddingTop:"12px",paddingBottom:"12px",paddingLeft:"16px",fontWeight:"700",color:"#ebebeb"},colSpan:"2",children:"OPERATING INCOME"}),e.jsx("td",{style:{paddingTop:"12px",paddingBottom:"12px",paddingRight:"16px",textAlign:"right",fontWeight:"700",fontSize:"18px",color:t.grossProfit-t.totalExpenses>=0?"#22c55e":"#ef4444"},children:a(t.grossProfit-t.totalExpenses)})]}),e.jsxs("tr",{style:{background:"linear-gradient(to right, #1c1c1c, #2a2a2a)",borderTop:"2px solid #404040"},children:[e.jsxs("td",{style:{paddingTop:"16px",paddingBottom:"16px",paddingLeft:"16px",fontWeight:"700",fontSize:"18px",color:"#ebebeb"},colSpan:"2",children:["NET INCOME",e.jsxs("span",{style:{marginLeft:"8px",fontSize:"14px",fontWeight:"400",color:"#b3b3b3"},children:["(",p(t.netMargin)," margin)"]})]}),e.jsx("td",{style:{paddingTop:"16px",paddingBottom:"16px",paddingRight:"16px",textAlign:"right",fontWeight:"700",fontSize:"20px",color:t.netProfit>=0?"#22c55e":"#ef4444"},children:a(t.netProfit)})]})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{style:{backgroundColor:"#2a2a2a",border:"1px solid #404040",borderRadius:"12px",padding:"24px"},children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:"#22c55e"},children:a(t.revenue)}),e.jsx("div",{style:{fontSize:"14px",color:"#b3b3b3"},children:"Total Revenue"}),e.jsxs("div",{style:{fontSize:"12px",color:"#808080",marginTop:"4px"},children:[t.salesCount," transactions"]})]})}),e.jsx("div",{style:{backgroundColor:"#2a2a2a",border:"1px solid #404040",borderRadius:"12px",padding:"24px"},children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:"#ef4444"},children:a(t.totalExpenses)}),e.jsx("div",{style:{fontSize:"14px",color:"#b3b3b3"},children:"Total Expenses"}),e.jsxs("div",{style:{fontSize:"12px",color:"#808080",marginTop:"4px"},children:[t.expensesCount," expenses"]})]})}),e.jsx("div",{style:{backgroundColor:"#2a2a2a",border:"1px solid #404040",borderRadius:"12px",padding:"24px"},children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:t.grossProfit>=0?"#22c55e":"#ef4444"},children:p(t.grossMargin)}),e.jsx("div",{style:{fontSize:"14px",color:"#b3b3b3"},children:"Gross Margin"}),e.jsxs("div",{style:{fontSize:"12px",color:"#808080",marginTop:"4px"},children:[a(t.grossProfit)," profit"]})]})}),e.jsx("div",{style:{backgroundColor:"#2a2a2a",border:"1px solid #404040",borderRadius:"12px",padding:"24px"},children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:t.netProfit>=0?"#22c55e":"#ef4444"},children:p(t.netMargin)}),e.jsx("div",{style:{fontSize:"14px",color:"#b3b3b3"},children:"Net Margin"}),e.jsxs("div",{style:{fontSize:"12px",color:"#808080",marginTop:"4px"},children:[a(t.netProfit)," net"]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[Object.keys(t.expensesByCategory).length>0&&e.jsxs("div",{style:{backgroundColor:"#2a2a2a",border:"1px solid #404040",borderRadius:"12px",padding:"24px"},children:[e.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#ebebeb",marginBottom:"16px"},children:"Expenses by Category"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:Object.entries(t.expensesByCategory).sort(([,c],[,o])=>o-c).map(([c,o])=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{style:{color:"#b3b3b3"},children:c}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("span",{style:{fontWeight:"500",color:"#ebebeb"},children:a(o)}),e.jsx("div",{style:{fontSize:"12px",color:"#808080"},children:p(o/t.totalExpenses*100)})]})]},c))})]}),t.salesByProduct.length>0&&e.jsxs("div",{style:{backgroundColor:"#2a2a2a",border:"1px solid #404040",borderRadius:"12px",padding:"24px"},children:[e.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#ebebeb",marginBottom:"16px"},children:"Top Products by Revenue"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:t.salesByProduct.slice(0,5).map((c,o)=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("span",{style:{color:"#ebebeb",fontWeight:"500"},children:c.productName}),e.jsxs("div",{style:{fontSize:"12px",color:"#808080"},children:[c.quantity," units sold"]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("span",{style:{fontWeight:"500",color:"#22c55e"},children:a(c.revenue)}),e.jsxs("div",{style:{fontSize:"12px",color:"#808080"},children:["+",a(c.profit)," profit"]})]})]},o))})]})]}),e.jsxs("div",{style:{backgroundColor:"#2a2a2a",border:"1px solid #404040",borderRadius:"12px",padding:"24px"},children:[e.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#ebebeb",marginBottom:"16px"},children:"Current Assets"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:"#3b82f6"},children:a(t.inventoryValue)}),e.jsx("div",{style:{fontSize:"14px",color:"#b3b3b3"},children:"Inventory Value"})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:"#808080"},children:a(t.netProfit)}),e.jsx("div",{style:{fontSize:"14px",color:"#b3b3b3"},children:"Retained Earnings"})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:"#22c55e"},children:a(t.inventoryValue+Math.max(0,t.netProfit))}),e.jsx("div",{style:{fontSize:"14px",color:"#b3b3b3"},children:"Total Assets"})]})]})]})]})}function re({startDate:s,endDate:l}){const{sales:t,products:a}=z(),p=S.useMemo(()=>t.filter(r=>{if(!r.date)return!1;const n=new Date(r.date);if(s&&l){const i=new Date(s),d=new Date(l);return n>=i&&n<=d}else if(s){const i=new Date(s);return n>=i}else if(l){const i=new Date(l);return n<=i}return!0}),[t,s,l]),x=S.useMemo(()=>{const r=p.reduce((j,g)=>j+(g.totalAmount||0),0),n=p.reduce((j,g)=>j+(g.profit||0),0),i=p.reduce((j,g)=>j+(g.quantity||0),0),d=p.length>0?r/p.length:0,h=r>0?n/r*100:0;return{totalRevenue:r,totalProfit:n,totalQuantity:i,totalSales:p.length,averageSaleValue:d,profitMargin:h}},[p]),u=S.useMemo(()=>{const r=new Map;return p.forEach(n=>{const i=n.productId||"unknown",d=r.get(i)||{productId:i,productName:n.productName||"Unknown Product",quantity:0,revenue:0,profit:0,salesCount:0};r.set(i,{...d,quantity:d.quantity+(n.quantity||0),revenue:d.revenue+(n.totalAmount||0),profit:d.profit+(n.profit||0),salesCount:d.salesCount+1})}),Array.from(r.values()).sort((n,i)=>i.revenue-n.revenue)},[p]),m=S.useMemo(()=>{const r=new Map;return p.forEach(n=>{const i=n.date||"unknown",d=r.get(i)||{date:i,revenue:0,profit:0,salesCount:0};r.set(i,{...d,revenue:d.revenue+(n.totalAmount||0),profit:d.profit+(n.profit||0),salesCount:d.salesCount+1})}),Array.from(r.values()).sort((n,i)=>new Date(n.date)-new Date(i.date))},[p]),f=r=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(r||0),c=r=>!r||r==="unknown"?"Unknown":w(r),o=()=>s&&l?`${w(s)} - ${w(l)}`:s?`From ${w(s)}`:l?`Until ${w(l)}`:"All Time";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Sales Report"}),e.jsx("span",{className:"text-sm text-gray-500",children:o()})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(M,{className:"h-5 w-5 text-green-600"})}),e.jsx("p",{className:"text-xs text-gray-600",children:"Total Revenue"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:f(x.totalRevenue)})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(P,{className:"h-5 w-5 text-blue-600"})}),e.jsx("p",{className:"text-xs text-gray-600",children:"Total Profit"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:f(x.totalProfit)})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(B,{className:"h-5 w-5 text-purple-600"})}),e.jsx("p",{className:"text-xs text-gray-600",children:"Units Sold"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:x.totalQuantity})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(G,{className:"h-5 w-5 text-orange-600"})}),e.jsx("p",{className:"text-xs text-gray-600",children:"Total Sales"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:x.totalSales})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(T,{className:"h-5 w-5 text-indigo-600"})}),e.jsx("p",{className:"text-xs text-gray-600",children:"Avg Sale Value"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:f(x.averageSaleValue)})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(P,{className:"h-5 w-5 text-teal-600"})}),e.jsx("p",{className:"text-xs text-gray-600",children:"Profit Margin"}),e.jsxs("p",{className:"text-lg font-bold text-gray-900",children:[x.profitMargin.toFixed(1),"%"]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-4",children:"Sales by Product"}),u.length===0?e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No sales data available for the selected period"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Revenue"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Profit"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sales Count"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Margin %"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u.slice(0,10).map(r=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:r.productName}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:r.quantity}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:f(r.revenue)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:f(r.profit)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:r.salesCount}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:[r.revenue>0?(r.profit/r.revenue*100).toFixed(1):"0.0","%"]})]},r.productId))})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-4",children:"Daily Sales Trend"}),m.length===0?e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No sales data available for the selected period"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sales Count"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Revenue"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Profit"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Margin %"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:m.map(r=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:c(r.date)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:r.salesCount}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:f(r.revenue)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:f(r.profit)}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:[r.revenue>0?(r.profit/r.revenue*100).toFixed(1):"0.0","%"]})]},r.date))})]})})]})]})}function ne({startDate:s,endDate:l}){const{expenses:t}=z(),a=S.useMemo(()=>t.filter(n=>{if(!n.date)return!1;const i=new Date(n.date);if(s&&l){const d=new Date(s),h=new Date(l);return i>=d&&i<=h}else if(s){const d=new Date(s);return i>=d}else if(l){const d=new Date(l);return i<=d}return!0}),[t,s,l]),p=S.useMemo(()=>{const n=a.reduce((h,j)=>h+(j.amount||0),0),i=a.length>0?n/a.length:0,d=a.reduce((h,j)=>(j.amount||0)>(h.amount||0)?j:h,a[0]||{amount:0});return{totalExpenses:n,totalTransactions:a.length,averageExpense:i,largestExpense:d}},[a]),x=S.useMemo(()=>{const n=new Map;a.forEach(h=>{const j=h.category||"Uncategorized",g=n.get(j)||{category:j,amount:0,count:0,percentage:0};n.set(j,{...g,amount:g.amount+(h.amount||0),count:g.count+1})});const i=p.totalExpenses;return Array.from(n.values()).map(h=>({...h,percentage:i>0?h.amount/i*100:0})).sort((h,j)=>j.amount-h.amount)},[a,p.totalExpenses]);S.useMemo(()=>{const n=new Map;return a.forEach(i=>{const d=i.date||"unknown",h=n.get(d)||{date:d,amount:0,count:0};n.set(d,{...h,amount:h.amount+(i.amount||0),count:h.count+1})}),Array.from(n.values()).sort((i,d)=>new Date(i.date)-new Date(d.date))},[a]);const u=S.useMemo(()=>{const n=new Map;return a.forEach(i=>{if(i.date){const d=i.date.substring(0,7),h=n.get(d)||{month:d,amount:0,count:0};n.set(d,{...h,amount:h.amount+(i.amount||0),count:h.count+1})}}),Array.from(n.values()).sort((i,d)=>i.month.localeCompare(d.month))},[a]),m=n=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(n||0),f=n=>!n||n==="unknown"?"Unknown":w(n),c=n=>{if(!n)return"Unknown";const[i,d]=n.split("-");return new Date(i,d-1).toLocaleDateString("en-US",{month:"short",year:"numeric"})},o=()=>s&&l?`${w(s)} - ${w(l)}`:s?`From ${w(s)}`:l?`Until ${w(l)}`:"All Time",r=n=>({Shipping:{bg:"rgba(59, 130, 246, 0.1)",text:"#60a5fa",border:"rgba(59, 130, 246, 0.3)"},Container:{bg:"rgba(147, 51, 234, 0.1)",text:"#a855f7",border:"rgba(147, 51, 234, 0.3)"},Customs:{bg:"rgba(34, 197, 94, 0.1)",text:"#4ade80",border:"rgba(34, 197, 94, 0.3)"},Transportation:{bg:"rgba(245, 158, 11, 0.1)",text:"#fbbf24",border:"rgba(245, 158, 11, 0.3)"},Storage:{bg:"rgba(249, 115, 22, 0.1)",text:"#fb923c",border:"rgba(249, 115, 22, 0.3)"},Marketing:{bg:"rgba(236, 72, 153, 0.1)",text:"#f472b6",border:"rgba(236, 72, 153, 0.3)"},"Loss/Damage":{bg:"rgba(239, 68, 68, 0.1)",text:"#f87171",border:"rgba(239, 68, 68, 0.3)"},Other:{bg:"rgba(107, 114, 128, 0.1)",text:"#9ca3af",border:"rgba(107, 114, 128, 0.3)"},Uncategorized:{bg:"rgba(107, 114, 128, 0.1)",text:"#9ca3af",border:"rgba(107, 114, 128, 0.3)"}})[n]||{bg:"rgba(107, 114, 128, 0.1)",text:"#9ca3af",border:"rgba(107, 114, 128, 0.3)"};return e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:[e.jsxs("div",{style:{backgroundColor:"#2a2a2a",borderRadius:"12px",border:"1px solid #404040",padding:"24px"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#ebebeb"},children:"Expense Report"}),e.jsx("span",{style:{fontSize:"14px",color:"#b3b3b3",backgroundColor:"#1c1c1c",padding:"6px 12px",borderRadius:"6px",border:"1px solid #404040"},children:o()})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(k,{title:"Total Expenses",value:m(p.totalExpenses),subtitle:"Period total",icon:M,iconBgColor:"bg-red-100",iconColor:"text-red-600"}),e.jsx(k,{title:"Transactions",value:`${p.totalTransactions}`,subtitle:"Expense entries",icon:Q,iconBgColor:"bg-blue-100",iconColor:"text-blue-600"}),e.jsx(k,{title:"Average Expense",value:m(p.averageExpense),subtitle:"Per transaction",icon:T,iconBgColor:"bg-purple-100",iconColor:"text-purple-600"}),e.jsx(k,{title:"Largest Expense",value:m(p.largestExpense?.amount||0),subtitle:p.largestExpense?.description?p.largestExpense.description.slice(0,30)+(p.largestExpense.description.length>30?"...":""):"No expenses",icon:U,iconBgColor:"bg-orange-100",iconColor:"text-orange-600"})]})]}),e.jsxs("div",{style:{backgroundColor:"#2a2a2a",borderRadius:"12px",border:"1px solid #404040",padding:"24px"},children:[e.jsx("h4",{style:{fontSize:"16px",fontWeight:"600",color:"#ebebeb",marginBottom:"16px"},children:"Expenses by Category"}),x.length===0?e.jsx("p",{style:{color:"#808080",textAlign:"center",padding:"16px 0"},children:"No expense data available for the selected period"}):e.jsx("div",{children:e.jsx("div",{style:{overflowX:"auto",borderRadius:"8px",border:"1px solid #404040"},children:e.jsxs("table",{style:{minWidth:"100%",borderCollapse:"separate",borderSpacing:0},children:[e.jsx("thead",{style:{backgroundColor:"#333333"},children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:"12px 24px",textAlign:"left",fontSize:"12px",fontWeight:"500",color:"#b3b3b3",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Category"}),e.jsx("th",{style:{padding:"12px 24px",textAlign:"right",fontSize:"12px",fontWeight:"500",color:"#b3b3b3",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Transactions"}),e.jsx("th",{style:{padding:"12px 24px",textAlign:"right",fontSize:"12px",fontWeight:"500",color:"#b3b3b3",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Total Amount"}),e.jsx("th",{style:{padding:"12px 24px",textAlign:"right",fontSize:"12px",fontWeight:"500",color:"#b3b3b3",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Average"}),e.jsx("th",{style:{padding:"12px 24px",textAlign:"right",fontSize:"12px",fontWeight:"500",color:"#b3b3b3",textTransform:"uppercase",letterSpacing:"0.05em"},children:"% of Total"})]})}),e.jsx("tbody",{style:{backgroundColor:"#1c1c1c"},children:x.map((n,i)=>{const d=r(n.category);return e.jsxs("tr",{style:{borderBottom:i<x.length-1?"1px solid #404040":"none",transition:"background-color 0.2s"},onMouseEnter:h=>{h.currentTarget.style.backgroundColor="#333333"},onMouseLeave:h=>{h.currentTarget.style.backgroundColor="transparent"},children:[e.jsx("td",{style:{padding:"16px 24px",whiteSpace:"nowrap"},children:e.jsx("span",{style:{padding:"4px 8px",fontSize:"12px",fontWeight:"500",borderRadius:"9999px",backgroundColor:d.bg,color:d.text,border:`1px solid ${d.border}`},children:n.category})}),e.jsx("td",{style:{padding:"16px 24px",whiteSpace:"nowrap",fontSize:"14px",color:"#ebebeb",textAlign:"right"},children:n.count}),e.jsx("td",{style:{padding:"16px 24px",whiteSpace:"nowrap",fontSize:"14px",color:"#ebebeb",textAlign:"right",fontWeight:"500"},children:m(n.amount)}),e.jsx("td",{style:{padding:"16px 24px",whiteSpace:"nowrap",fontSize:"14px",color:"#ebebeb",textAlign:"right"},children:m(n.amount/n.count)}),e.jsxs("td",{style:{padding:"16px 24px",whiteSpace:"nowrap",fontSize:"14px",color:"#ebebeb",textAlign:"right"},children:[n.percentage.toFixed(1),"%"]})]},n.category)})})]})})})]}),u.length>0&&e.jsxs("div",{style:{backgroundColor:"#2a2a2a",borderRadius:"12px",border:"1px solid #404040",padding:"24px"},children:[e.jsx("h4",{style:{fontSize:"16px",fontWeight:"600",color:"#ebebeb",marginBottom:"16px"},children:"Monthly Expense Trend"}),e.jsx("div",{style:{overflowX:"auto",borderRadius:"8px",border:"1px solid #404040"},children:e.jsxs("table",{style:{minWidth:"100%",borderCollapse:"separate",borderSpacing:0},children:[e.jsx("thead",{style:{backgroundColor:"#333333"},children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:"12px 24px",textAlign:"left",fontSize:"12px",fontWeight:"500",color:"#b3b3b3",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Month"}),e.jsx("th",{style:{padding:"12px 24px",textAlign:"right",fontSize:"12px",fontWeight:"500",color:"#b3b3b3",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Transactions"}),e.jsx("th",{style:{padding:"12px 24px",textAlign:"right",fontSize:"12px",fontWeight:"500",color:"#b3b3b3",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Total Amount"}),e.jsx("th",{style:{padding:"12px 24px",textAlign:"right",fontSize:"12px",fontWeight:"500",color:"#b3b3b3",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Average"})]})}),e.jsx("tbody",{style:{backgroundColor:"#1c1c1c"},children:u.map((n,i)=>e.jsxs("tr",{style:{borderBottom:i<u.length-1?"1px solid #404040":"none",transition:"background-color 0.2s"},onMouseEnter:d=>{d.currentTarget.style.backgroundColor="#333333"},onMouseLeave:d=>{d.currentTarget.style.backgroundColor="transparent"},children:[e.jsx("td",{style:{padding:"16px 24px",whiteSpace:"nowrap",fontSize:"14px",fontWeight:"500",color:"#ebebeb"},children:c(n.month)}),e.jsx("td",{style:{padding:"16px 24px",whiteSpace:"nowrap",fontSize:"14px",color:"#ebebeb",textAlign:"right"},children:n.count}),e.jsx("td",{style:{padding:"16px 24px",whiteSpace:"nowrap",fontSize:"14px",color:"#ebebeb",textAlign:"right",fontWeight:"500"},children:m(n.amount)}),e.jsx("td",{style:{padding:"16px 24px",whiteSpace:"nowrap",fontSize:"14px",color:"#ebebeb",textAlign:"right"},children:m(n.amount/n.count)})]},n.month))})]})})]}),e.jsxs("div",{style:{backgroundColor:"#2a2a2a",borderRadius:"12px",border:"1px solid #404040",padding:"24px"},children:[e.jsx("h4",{style:{fontSize:"16px",fontWeight:"600",color:"#ebebeb",marginBottom:"16px"},children:"Recent Expenses"}),a.length===0?e.jsx("p",{style:{color:"#808080",textAlign:"center",padding:"16px 0"},children:"No expenses found for the selected period"}):e.jsx("div",{style:{overflowX:"auto",borderRadius:"8px",border:"1px solid #404040"},children:e.jsxs("table",{style:{minWidth:"100%",borderCollapse:"separate",borderSpacing:0},children:[e.jsx("thead",{style:{backgroundColor:"#333333"},children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:"12px 24px",textAlign:"left",fontSize:"12px",fontWeight:"500",color:"#b3b3b3",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Date"}),e.jsx("th",{style:{padding:"12px 24px",textAlign:"left",fontSize:"12px",fontWeight:"500",color:"#b3b3b3",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Description"}),e.jsx("th",{style:{padding:"12px 24px",textAlign:"left",fontSize:"12px",fontWeight:"500",color:"#b3b3b3",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Category"}),e.jsx("th",{style:{padding:"12px 24px",textAlign:"right",fontSize:"12px",fontWeight:"500",color:"#b3b3b3",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Amount"})]})}),e.jsx("tbody",{style:{backgroundColor:"#1c1c1c"},children:a.sort((n,i)=>new Date(i.date)-new Date(n.date)).slice(0,10).map((n,i)=>{const d=r(n.category);return e.jsxs("tr",{style:{borderBottom:i<9?"1px solid #404040":"none",transition:"background-color 0.2s"},onMouseEnter:h=>{h.currentTarget.style.backgroundColor="#333333"},onMouseLeave:h=>{h.currentTarget.style.backgroundColor="transparent"},children:[e.jsx("td",{style:{padding:"16px 24px",whiteSpace:"nowrap",fontSize:"14px",color:"#ebebeb"},children:f(n.date)}),e.jsx("td",{style:{padding:"16px 24px",fontSize:"14px",color:"#ebebeb"},children:n.description||"No description"}),e.jsx("td",{style:{padding:"16px 24px",whiteSpace:"nowrap"},children:e.jsx("span",{style:{padding:"4px 8px",fontSize:"12px",fontWeight:"500",borderRadius:"9999px",backgroundColor:d.bg,color:d.text,border:`1px solid ${d.border}`},children:n.category||"Uncategorized"})}),e.jsx("td",{style:{padding:"16px 24px",whiteSpace:"nowrap",fontSize:"14px",color:"#ebebeb",textAlign:"right",fontWeight:"500"},children:m(n.amount)})]},n.id)})})]})})]})]})}function se({dateRange:s,onDateRangeChange:l}){const[t,a]=S.useState(s);S.useEffect(()=>{a(s)},[s]);const p=[{id:"today",label:"Today",startDate:new Date().toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0]},{id:"thisWeek",label:"This Week",startDate:x(),endDate:new Date().toISOString().split("T")[0]},{id:"thisMonth",label:"This Month",startDate:new Date().toISOString().substring(0,7)+"-01",endDate:new Date().toISOString().split("T")[0]},{id:"lastMonth",label:"Last Month",startDate:u(),endDate:m()},{id:"thisYear",label:"This Year",startDate:new Date().getFullYear()+"-01-01",endDate:new Date().toISOString().split("T")[0]},{id:"lastYear",label:"Last Year",startDate:new Date().getFullYear()-1+"-01-01",endDate:new Date().getFullYear()-1+"-12-31"},{id:"allTime",label:"All Time",startDate:"",endDate:""}];function x(){const o=new Date,r=o.getDay(),n=o.getDate()-r+(r===0?-6:1);return new Date(o.setDate(n)).toISOString().split("T")[0]}function u(){const o=new Date;return new Date(o.getFullYear(),o.getMonth()-1,1).toISOString().split("T")[0]}function m(){const o=new Date;return new Date(o.getFullYear(),o.getMonth(),0).toISOString().split("T")[0]}const f=o=>{const r={startDate:o.startDate,endDate:o.endDate,preset:o.id};a(r),l(r)},c=(o,r)=>{const n={...t,[o]:r,preset:"custom"};a(n),l(n)};return e.jsxs("div",{style:{backgroundColor:"#2a2a2a",borderRadius:"12px",border:"1px solid #404040",overflow:"hidden"},children:[e.jsx("div",{style:{backgroundColor:"#333333",padding:"16px 20px",borderBottom:"1px solid #404040"},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(H,{style:{height:"18px",width:"18px",color:"#3b82f6"}}),e.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",color:"#ebebeb"},children:"Report Filters"})]}),(t.startDate||t.endDate)&&e.jsxs("button",{onClick:()=>{const o={startDate:"",endDate:"",preset:"allTime"};a(o),l(o)},style:{fontSize:"12px",color:"#ef4444",backgroundColor:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"6px",padding:"6px 12px",cursor:"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",gap:"4px"},onMouseEnter:o=>{o.target.style.backgroundColor="rgba(239, 68, 68, 0.2)",o.target.style.borderColor="rgba(239, 68, 68, 0.5)"},onMouseLeave:o=>{o.target.style.backgroundColor="rgba(239, 68, 68, 0.1)",o.target.style.borderColor="rgba(239, 68, 68, 0.3)"},children:[e.jsx(W,{style:{height:"14px",width:"14px"}}),e.jsx("span",{className:"hidden sm:inline",children:"Clear all"}),e.jsx("span",{className:"sm:hidden",children:"Clear"})]})]})}),e.jsxs("div",{style:{padding:"20px",display:"flex",flexDirection:"column",gap:"24px"},children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx(Y,{style:{height:"16px",width:"16px",color:"#808080",marginRight:"8px"}}),e.jsx("label",{style:{fontSize:"14px",fontWeight:"500",color:"#b3b3b3"},children:"Quick Date Ranges"})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-7 gap-2",children:p.map(o=>e.jsx("button",{onClick:()=>f(o),style:{padding:"8px 12px",fontSize:"13px",fontWeight:"500",borderRadius:"6px",border:"1px solid",borderColor:t.preset===o.id?"#3b82f6":"#404040",backgroundColor:t.preset===o.id?"#3b82f6":"#1c1c1c",color:t.preset===o.id?"white":"#ebebeb",cursor:"pointer",transition:"all 0.2s",textAlign:"center"},onMouseEnter:r=>{t.preset!==o.id&&(r.target.style.backgroundColor="#333333",r.target.style.borderColor="#3b82f6")},onMouseLeave:r=>{t.preset!==o.id&&(r.target.style.backgroundColor="#1c1c1c",r.target.style.borderColor="#404040")},children:o.label},o.id))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx(T,{style:{height:"16px",width:"16px",color:"#808080",marginRight:"8px"}}),e.jsx("label",{style:{fontSize:"14px",fontWeight:"500",color:"#b3b3b3"},children:"Custom Date Range"})]}),e.jsxs("div",{style:{backgroundColor:"#1c1c1c",borderRadius:"8px",padding:"16px"},children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("label",{htmlFor:"startDate",style:{display:"block",fontSize:"12px",fontWeight:"500",color:"#808080",marginBottom:"6px"},children:"From"}),e.jsxs("div",{className:"relative",children:[e.jsx(T,{style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",height:"16px",width:"16px",color:"#808080"}}),e.jsx("input",{type:"date",id:"startDate",value:t.startDate,onChange:o=>c("startDate",o.target.value),style:{width:"100%",paddingLeft:"40px",paddingRight:"12px",paddingTop:"10px",paddingBottom:"10px",border:"1px solid #404040",borderRadius:"6px",backgroundColor:"#2a2a2a",color:"#ebebeb",fontSize:"14px",outline:"none",transition:"all 0.2s"},onFocus:o=>{o.target.style.borderColor="#3b82f6",o.target.style.boxShadow="0 0 0 3px rgba(59, 130, 246, 0.1)"},onBlur:o=>{o.target.style.borderColor="#404040",o.target.style.boxShadow="none"}})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{htmlFor:"endDate",style:{display:"block",fontSize:"12px",fontWeight:"500",color:"#808080",marginBottom:"6px"},children:"To"}),e.jsxs("div",{className:"relative",children:[e.jsx(T,{style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",height:"16px",width:"16px",color:"#808080"}}),e.jsx("input",{type:"date",id:"endDate",value:t.endDate,onChange:o=>c("endDate",o.target.value),style:{width:"100%",paddingLeft:"40px",paddingRight:"12px",paddingTop:"10px",paddingBottom:"10px",border:"1px solid #404040",borderRadius:"6px",backgroundColor:"#2a2a2a",color:"#ebebeb",fontSize:"14px",outline:"none",transition:"all 0.2s"},onFocus:o=>{o.target.style.borderColor="#3b82f6",o.target.style.boxShadow="0 0 0 3px rgba(59, 130, 246, 0.1)"},onBlur:o=>{o.target.style.borderColor="#404040",o.target.style.boxShadow="none"}})]})]})]}),t.preset==="custom"&&(t.startDate||t.endDate)&&e.jsxs("button",{onClick:()=>{c("startDate",""),c("endDate","")},style:{marginTop:"12px",fontSize:"14px",color:"#3b82f6",backgroundColor:"transparent",border:"none",fontWeight:"500",cursor:"pointer",transition:"color 0.2s",display:"flex",alignItems:"center",gap:"4px"},onMouseEnter:o=>{o.target.style.color="#2563eb"},onMouseLeave:o=>{o.target.style.color="#3b82f6"},children:[e.jsx(W,{style:{height:"12px",width:"12px"}}),"Clear custom range"]})]})]}),(t.startDate||t.endDate)&&e.jsx("div",{style:{backgroundColor:"rgba(59, 130, 246, 0.1)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"8px",padding:"16px"},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{style:{height:"32px",width:"32px",backgroundColor:"rgba(59, 130, 246, 0.2)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(T,{style:{height:"16px",width:"16px",color:"#3b82f6"}})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"12px",fontWeight:"500",color:"#60a5fa",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Active Period"}),e.jsx("div",{style:{fontSize:"14px",fontWeight:"600",color:"#ebebeb",marginTop:"2px"},children:t.startDate&&t.endDate?t.startDate===t.endDate?w(t.startDate):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:w(t.startDate)}),e.jsx(X,{style:{height:"16px",width:"16px",color:"#808080"}}),e.jsx("span",{children:w(t.endDate)})]}):t.startDate?`From ${w(t.startDate)}`:`Until ${w(t.endDate)}`})]})]}),t.startDate&&t.endDate&&e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:"12px",color:"#b3b3b3"},children:"Duration"}),e.jsxs("div",{style:{fontSize:"14px",fontWeight:"600",color:"#ebebeb"},children:[Math.ceil((new Date(t.endDate)-new Date(t.startDate))/(1e3*60*60*24))+1," days"]})]})]})})]})]})}function oe({dateRange:s,activeReport:l}){const{sales:t,expenses:a,products:p,containers:x}=z(),{showSuccessMessage:u,showErrorMessage:m}=V(),[f,c]=S.useState(!1),o=async()=>{c(!0);try{let g="",y="";switch(l){case"profitLoss":g=i(),y=`profit-loss-${r()}.csv`;break;case"sales":g=d(),y=`sales-report-${r()}.csv`;break;case"expenses":g=h(),y=`expenses-report-${r()}.csv`;break;default:g=i(),y=`business-report-${r()}.csv`}const b=new Blob([g],{type:"text/csv;charset=utf-8;"}),C=document.createElement("a");if(C.download!==void 0){const N=URL.createObjectURL(b);C.setAttribute("href",N),C.setAttribute("download",y),C.style.visibility="hidden",document.body.appendChild(C),C.click(),document.body.removeChild(C)}u("Export Successful",`${y} has been downloaded`)}catch(g){console.error("Export error:",g),m("Export Failed","Failed to export report data")}finally{c(!1)}},r=()=>s.startDate&&s.endDate?s.startDate===s.endDate?s.startDate:`${s.startDate}_to_${s.endDate}`:s.startDate?`from_${s.startDate}`:s.endDate?`until_${s.endDate}`:new Date().toISOString().split("T")[0],n=g=>!s.startDate&&!s.endDate?g:g.filter(y=>{const b=y.date;if(!b)return!1;const C=!s.startDate||b>=s.startDate,N=!s.endDate||b<=s.endDate;return C&&N}),i=()=>{const g=n(t),y=n(a),b=g.reduce((v,D)=>v+(D.totalAmount||0),0),C=g.reduce((v,D)=>v+(D.costPerUnit||0)*(D.quantity||0),0),N=b-C,E=y.reduce((v,D)=>v+(D.amount||0),0),I=N-E;return["Profit & Loss Statement",`Period: ${s.startDate||"Beginning"} to ${s.endDate||"Present"}`,"","Category,Amount",`Revenue,$${b.toFixed(2)}`,`Cost of Goods Sold,-$${C.toFixed(2)}`,`Gross Profit,$${N.toFixed(2)}`,`Operating Expenses,-$${E.toFixed(2)}`,`Net Profit,$${I.toFixed(2)}`,"","Sales Summary","Date,Product,Quantity,Price per Unit,Total,Profit",...g.map(v=>`${v.date},${v.productName},${v.quantity},$${(v.pricePerUnit||0).toFixed(2)},$${(v.totalAmount||0).toFixed(2)},$${(v.profit||0).toFixed(2)}`),"","Expenses Summary","Date,Category,Description,Amount",...y.map(v=>`${v.date},${v.category},${v.description},$${(v.amount||0).toFixed(2)}`)].join(`
`)},d=()=>{const g=n(t);return["Sales Report",`Period: ${s.startDate||"Beginning"} to ${s.endDate||"Present"}`,"","Date,Time,Product,Category,Quantity,Price per Unit,Total Amount,Cost per Unit,Profit,Notes",...g.map(b=>`${b.date},${b.time||""},${b.productName},,${b.quantity},$${(b.pricePerUnit||0).toFixed(2)},$${(b.totalAmount||0).toFixed(2)},$${(b.costPerUnit||0).toFixed(2)},$${(b.profit||0).toFixed(2)},"${b.notes||""}"`)].join(`
`)},h=()=>{const g=n(a);return["Expenses Report",`Period: ${s.startDate||"Beginning"} to ${s.endDate||"Present"}`,"","Date,Category,Description,Amount,Container ID,Notes",...g.map(b=>`${b.date},${b.category},${b.description},$${(b.amount||0).toFixed(2)},${b.containerId||""},"${b.notes||""}"`)].join(`
`)},j={profitLoss:"P&L Report",sales:"Sales Report",expenses:"Expenses Report"};return e.jsx("button",{onClick:o,disabled:f,className:"inline-flex items-center px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-md shadow-sm hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed",children:f?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Exporting..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"h-4 w-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export ",j[l]||"Report"]})})}function be(){const[s,l]=S.useState({startDate:"",endDate:"",preset:"thisMonth"}),[t,a]=S.useState("profitLoss"),p=u=>{l(u)},x=[{id:"profitLoss",name:"Profit & Loss",description:"Revenue, expenses, and profitability analysis"},{id:"sales",name:"Sales Report",description:"Detailed sales performance analysis"},{id:"expenses",name:"Expense Report",description:"Expense breakdown and analysis"}];return e.jsxs("div",{style:{padding:"24px"},children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"24px",fontWeight:"600",color:"#ebebeb"},children:"Reports & Analytics"}),e.jsx("p",{style:{fontSize:"14px",color:"#b3b3b3",marginTop:"6px"},children:"Comprehensive business performance analysis"})]}),e.jsx("div",{className:"mt-4 sm:mt-0",children:e.jsx(oe,{dateRange:s,activeReport:t})})]}),e.jsx("div",{style:{marginBottom:"32px"},children:e.jsx("div",{style:{backgroundColor:"#2a2a2a",borderRadius:"12px",border:"1px solid #404040",padding:"8px",overflow:"hidden"},children:e.jsx("nav",{className:"flex",children:x.map((u,m)=>e.jsx("button",{onClick:()=>a(u.id),style:{flex:"1",padding:"16px 20px",borderRadius:"8px",backgroundColor:t===u.id?"#3b82f6":"transparent",color:t===u.id?"white":"#b3b3b3",border:"none",cursor:"pointer",transition:"all 0.2s ease",fontSize:"14px",fontWeight:"500",textAlign:"center",marginRight:m<x.length-1?"4px":"0"},onMouseEnter:f=>{t!==u.id&&(f.target.style.backgroundColor="#333333",f.target.style.color="#ebebeb")},onMouseLeave:f=>{t!==u.id&&(f.target.style.backgroundColor="transparent",f.target.style.color="#b3b3b3")},title:`${u.name}: ${u.description}`,children:e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"4px"},children:u.name}),e.jsx("div",{style:{fontSize:"12px",opacity:t===u.id?.9:.7,lineHeight:"1.3"},className:"hidden sm:block",children:u.description})]})},u.id))})})}),e.jsx("div",{style:{marginBottom:"32px"},children:e.jsx(se,{dateRange:s,onDateRangeChange:p})}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:[t==="profitLoss"&&e.jsx(te,{startDate:s.startDate||null,endDate:s.endDate||null}),t==="sales"&&e.jsx(re,{startDate:s.startDate||null,endDate:s.endDate||null}),t==="expenses"&&e.jsx(ne,{startDate:s.startDate||null,endDate:s.endDate||null})]})]})}export{be as default};
