import{u as C,d as v,r as d,j as o,X as k}from"./index-DwJYWGdQ.js";import{f as z}from"./dateFormatter-DEoQwZ0j.js";import{M as E}from"./Modal-DNmj6vXc.js";function B({expense:n,onClose:l}){const{addExpense:p,deleteExpense:y}=C(),{showSuccessMessage:b,showErrorMessage:f}=v(),[r,x]=d.useState({category:"Transport",description:"",amount:"",date:new Date().toISOString().split("T")[0],containerId:"",notes:""}),[t,g]=d.useState({}),[a,u]=d.useState(!1),h=["Transport","Rent","Staff Salaries","Miscellaneous","Marketing","Utilities","Financial Expenses","Taxes","Discount"];d.useEffect(()=>{n&&x({category:n.category||"Transport",description:n.description||"",amount:n.amount?.toString()||"",date:n.date||new Date().toISOString().split("T")[0],containerId:n.containerId||"",notes:n.notes||""})},[n]);const i=e=>{const{name:s,value:w}=e.target;x(c=>({...c,[s]:w})),t[s]&&g(c=>({...c,[s]:""}))},m=()=>{const e={};return r.category||(e.category="Please select a category"),r.description.trim()||(e.description="Description is required"),r.amount?parseFloat(r.amount)<=0&&(e.amount="Amount must be greater than 0"):e.amount="Amount is required",r.date||(e.date="Date is required"),g(e),Object.keys(e).length===0},j=async e=>{if(e.preventDefault(),!!m()){u(!0);try{const s={category:r.category,description:r.description.trim(),amount:parseFloat(r.amount),date:r.date,containerId:r.containerId||null,notes:r.notes.trim()};n?(await y(n.id),await p(s),b("Expense Updated","Expense has been updated successfully")):(await p(s),b("Expense Added","New expense has been recorded successfully")),l()}catch(s){console.error("Expense submission error:",s),f("Expense Failed",s.message||"Failed to record expense")}finally{u(!1)}}},S=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e||0);return o.jsx(E,{isOpen:!0,onClose:l,size:"medium",children:o.jsxs("div",{style:{backgroundColor:"#2a2a2a",border:"1px solid #404040",borderRadius:"8px",padding:"24px"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"24px"},children:[o.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#ebebeb"},children:n?"Edit Expense":"Add New Expense"}),o.jsxs("button",{onClick:l,style:{color:"#b3b3b3",backgroundColor:"transparent",border:"none",borderRadius:"6px",padding:"8px",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:e=>{e.target.style.color="#ebebeb",e.target.style.backgroundColor="rgba(255, 255, 255, 0.1)"},onMouseLeave:e=>{e.target.style.color="#b3b3b3",e.target.style.backgroundColor="transparent"},children:[o.jsx("span",{className:"sr-only",children:"Close"}),o.jsx(k,{className:"h-6 w-6"})]})]}),o.jsxs("form",{onSubmit:j,style:{display:"flex",flexDirection:"column",gap:"16px"},children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"category",style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#ebebeb",marginBottom:"8px"},children:"Category *"}),o.jsx("select",{id:"category",name:"category",value:r.category,onChange:i,style:{width:"100%",padding:"12px",fontSize:"14px",backgroundColor:"#1c1c1c",color:"#ebebeb",border:t.category?"1px solid #ef4444":"1px solid #404040",borderRadius:"6px",outline:"none",transition:"border-color 0.2s, box-shadow 0.2s"},onFocus:e=>{e.target.style.borderColor=t.category?"#ef4444":"#60a5fa",e.target.style.boxShadow=t.category?"0 0 0 3px rgba(239, 68, 68, 0.1)":"0 0 0 3px rgba(96, 165, 250, 0.1)"},onBlur:e=>{e.target.style.borderColor=t.category?"#ef4444":"#404040",e.target.style.boxShadow="none"},children:h.map(e=>o.jsx("option",{value:e,children:e},e))}),t.category&&o.jsx("p",{style:{marginTop:"4px",fontSize:"14px",color:"#ef4444"},children:t.category})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"amount",style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#ebebeb",marginBottom:"8px"},children:"Amount ($) *"}),o.jsx("input",{type:"number",id:"amount",name:"amount",value:r.amount,onChange:i,min:"0",step:"0.01",style:{width:"100%",padding:"12px",fontSize:"14px",backgroundColor:"#1c1c1c",color:"#ebebeb",border:t.amount?"1px solid #ef4444":"1px solid #404040",borderRadius:"6px",outline:"none",transition:"border-color 0.2s, box-shadow 0.2s"},onFocus:e=>{e.target.style.borderColor=t.amount?"#ef4444":"#60a5fa",e.target.style.boxShadow=t.amount?"0 0 0 3px rgba(239, 68, 68, 0.1)":"0 0 0 3px rgba(96, 165, 250, 0.1)"},onBlur:e=>{e.target.style.borderColor=t.amount?"#ef4444":"#404040",e.target.style.boxShadow="none"},placeholder:"0.00"}),t.amount&&o.jsx("p",{style:{marginTop:"4px",fontSize:"14px",color:"#ef4444"},children:t.amount})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"description",style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#ebebeb",marginBottom:"8px"},children:"Description *"}),o.jsx("input",{type:"text",id:"description",name:"description",value:r.description,onChange:i,style:{width:"100%",padding:"12px",fontSize:"14px",backgroundColor:"#1c1c1c",color:"#ebebeb",border:t.description?"1px solid #ef4444":"1px solid #404040",borderRadius:"6px",outline:"none",transition:"border-color 0.2s, box-shadow 0.2s"},onFocus:e=>{e.target.style.borderColor=t.description?"#ef4444":"#60a5fa",e.target.style.boxShadow=t.description?"0 0 0 3px rgba(239, 68, 68, 0.1)":"0 0 0 3px rgba(96, 165, 250, 0.1)"},onBlur:e=>{e.target.style.borderColor=t.description?"#ef4444":"#404040",e.target.style.boxShadow="none"},placeholder:"Brief description of the expense..."}),t.description&&o.jsx("p",{style:{marginTop:"4px",fontSize:"14px",color:"#ef4444"},children:t.description})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"date",style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#ebebeb",marginBottom:"8px"},children:"Date *"}),o.jsx("input",{type:"date",id:"date",name:"date",value:r.date,onChange:i,style:{width:"100%",padding:"12px",fontSize:"14px",backgroundColor:"#1c1c1c",color:"#ebebeb",border:t.date?"1px solid #ef4444":"1px solid #404040",borderRadius:"6px",outline:"none",transition:"border-color 0.2s, box-shadow 0.2s"},onFocus:e=>{e.target.style.borderColor=t.date?"#ef4444":"#60a5fa",e.target.style.boxShadow=t.date?"0 0 0 3px rgba(239, 68, 68, 0.1)":"0 0 0 3px rgba(96, 165, 250, 0.1)"},onBlur:e=>{e.target.style.borderColor=t.date?"#ef4444":"#404040",e.target.style.boxShadow="none"}}),t.date&&o.jsx("p",{style:{marginTop:"4px",fontSize:"14px",color:"#ef4444"},children:t.date})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"containerId",style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#ebebeb",marginBottom:"8px"},children:"Container ID"}),o.jsx("input",{type:"text",id:"containerId",name:"containerId",value:r.containerId,onChange:i,style:{width:"100%",padding:"12px",fontSize:"14px",backgroundColor:"#1c1c1c",color:"#ebebeb",border:"1px solid #404040",borderRadius:"6px",outline:"none",transition:"border-color 0.2s, box-shadow 0.2s"},onFocus:e=>{e.target.style.borderColor="#60a5fa",e.target.style.boxShadow="0 0 0 3px rgba(96, 165, 250, 0.1)"},onBlur:e=>{e.target.style.borderColor="#404040",e.target.style.boxShadow="none"},placeholder:"Optional container reference"}),o.jsx("p",{style:{marginTop:"4px",fontSize:"12px",color:"#b3b3b3"},children:"Link to specific container (optional)"})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"notes",style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#ebebeb",marginBottom:"8px"},children:"Additional Notes"}),o.jsx("textarea",{id:"notes",name:"notes",value:r.notes,onChange:i,rows:3,style:{width:"100%",padding:"12px",fontSize:"14px",backgroundColor:"#1c1c1c",color:"#ebebeb",border:"1px solid #404040",borderRadius:"6px",outline:"none",transition:"border-color 0.2s, box-shadow 0.2s",resize:"vertical"},onFocus:e=>{e.target.style.borderColor="#60a5fa",e.target.style.boxShadow="0 0 0 3px rgba(96, 165, 250, 0.1)"},onBlur:e=>{e.target.style.borderColor="#404040",e.target.style.boxShadow="none"},placeholder:"Additional details, receipts, etc..."})]}),r.amount&&o.jsxs("div",{style:{backgroundColor:"rgba(59, 130, 246, 0.1)",borderRadius:"8px",padding:"16px",border:"1px solid rgba(59, 130, 246, 0.3)"},children:[o.jsx("h4",{style:{fontSize:"14px",fontWeight:"600",color:"#3b82f6",marginBottom:"12px"},children:"Expense Summary"}),o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",fontSize:"14px"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[o.jsx("span",{style:{color:"#60a5fa"},children:"Category:"}),o.jsx("span",{style:{fontWeight:"600",color:"#ebebeb"},children:r.category})]}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[o.jsx("span",{style:{color:"#60a5fa"},children:"Amount:"}),o.jsx("span",{style:{fontWeight:"600",color:"#ebebeb"},children:S(r.amount)})]}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[o.jsx("span",{style:{color:"#60a5fa"},children:"Date:"}),o.jsx("span",{style:{fontWeight:"600",color:"#ebebeb"},children:z(r.date)})]})]})]}),o.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px",paddingTop:"16px",borderTop:"1px solid #404040",marginTop:"8px"},children:[o.jsx("button",{type:"button",onClick:l,disabled:a,style:{padding:"8px 16px",fontSize:"14px",fontWeight:"500",color:"#b3b3b3",backgroundColor:"transparent",border:"1px solid #404040",borderRadius:"6px",cursor:a?"not-allowed":"pointer",opacity:a?.5:1,transition:"all 0.2s",whiteSpace:"nowrap"},onMouseEnter:e=>{a||(e.target.style.backgroundColor="rgba(255, 255, 255, 0.05)",e.target.style.color="#ebebeb")},onMouseLeave:e=>{a||(e.target.style.backgroundColor="transparent",e.target.style.color="#b3b3b3")},children:"Cancel"}),o.jsx("button",{type:"submit",disabled:a,style:{padding:"8px 16px",fontSize:"14px",fontWeight:"500",color:"#ffffff",backgroundColor:"#3b82f6",border:"none",borderRadius:"6px",cursor:a?"not-allowed":"pointer",opacity:a?.5:1,transition:"all 0.2s",whiteSpace:"nowrap"},onMouseEnter:e=>{a||(e.target.style.backgroundColor="#2563eb")},onMouseLeave:e=>{a||(e.target.style.backgroundColor="#3b82f6")},children:a?"Processing...":n?"Update Expense":"Add Expense"})]})]})]})})}export{B as default};
