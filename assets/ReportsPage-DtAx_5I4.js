import{u as E,r as v,j as e,D as k,P as R,R as Y,h as V,X as A,f as q,d as G}from"./index-DPf7JDXQ.js";import{T as M}from"./trending-up-CwnZmgTI.js";import{T as W}from"./trending-down-CmmKGqIM.js";import{f as w}from"./dateFormatter-DEoQwZ0j.js";import{U as z}from"./users-DVKgvr1L.js";import{C as P}from"./calendar-CQJkPs1p.js";import{S as $}from"./StatCard-DODbRGRV.js";import{F as Q}from"./file-text-DjujcPnM.js";import{F as _}from"./funnel-BWgtH4lQ.js";import{C as H}from"./chevron-right-Cmgr-ht4.js";function K(r){return r.reduce((i,t)=>i+(t.costPerUnit||0)*(t.quantity||0),0)}function U(r){return r.reduce((i,t)=>i+(t.totalAmount||0),0)}function T(r){return r.reduce((i,t)=>i+(t.profit||0),0)}function L(r){return r.reduce((i,t)=>i+(t.amount||0),0)}function X(r,i){const t=T(r),n=L(i);return t-n}function J(r,i){const t=U(r),n=T(r),d=X(r,i);return{grossMargin:t>0?n/t*100:0,netMargin:t>0?d/t*100:0}}function Z(r){return r.reduce((i,t)=>{const n=(t.costPerKg||t.costPerUnit||0)*(t.bagWeight||25);return i+t.currentStock*n},0)}function I(r,i,t){return!i&&!t?r:r.filter(n=>{const d=n.date;if(!d)return!1;const c=!i||d>=i,p=!t||d<=t;return c&&p})}function O(r,i,t,n=null,d=null){const c=I(r,n,d),p=I(i,n,d),f=U(c),N=K(c),g=T(c),o=L(p),a=g-o,s=J(c,p),l=c.length>0?f/c.length:0,m=p.length>0?o/p.length:0,u=p.reduce((x,y)=>{const h=y.category||"Miscellaneous";return x[h]=(x[h]||0)+y.amount,x},{}),j=c.reduce((x,y)=>{const h=y.productId;return x[h]||(x[h]={productName:y.productName,quantity:0,revenue:0,profit:0,salesCount:0}),x[h].quantity+=y.quantity||0,x[h].revenue+=y.totalAmount||0,x[h].profit+=y.profit||0,x[h].salesCount+=1,x},{});return{startDate:n,endDate:d,salesCount:c.length,expensesCount:p.length,revenue:f,cogs:N,grossProfit:g,totalExpenses:o,netProfit:a,grossMargin:s.grossMargin,netMargin:s.netMargin,averageSaleAmount:l,averageExpenseAmount:m,expensesByCategory:u,salesByProduct:Object.values(j).sort((x,y)=>y.revenue-x.revenue),inventoryValue:Z(t)}}function ee(r=null,i=null){const{sales:t,expenses:n,products:d}=E(),c=v.useMemo(()=>O(t,n,d,r,i),[t,n,d,r,i]);return{report:c,formatCurrency:a=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a||0),formatPercentage:a=>`${(a||0).toFixed(1)}%`,formatDate:a=>a?new Date(a).toLocaleDateString():null,getDateRanges:()=>{const a=new Date,s=a.toISOString().substring(0,7),l=new Date(a.getFullYear(),a.getMonth()-1,1).toISOString().split("T")[0],m=new Date(a.getFullYear(),a.getMonth(),0).toISOString().split("T")[0],u=`${a.getFullYear()}-01-01`,j=`${a.getFullYear()-1}-01-01`,x=`${a.getFullYear()-1}-12-31`;return{today:{label:"Today",startDate:a.toISOString().split("T")[0],endDate:a.toISOString().split("T")[0]},thisMonth:{label:"This Month",startDate:s+"-01",endDate:a.toISOString().split("T")[0]},lastMonth:{label:"Last Month",startDate:l,endDate:m},thisYear:{label:"This Year",startDate:u,endDate:a.toISOString().split("T")[0]},lastYear:{label:"Last Year",startDate:j,endDate:x},allTime:{label:"All Time",startDate:null,endDate:null}}},getPerformanceIndicators:()=>{const a=[];return c.netMargin>20?a.push({type:"success",message:"Excellent profit margin"}):c.netMargin>10?a.push({type:"info",message:"Good profit margin"}):c.netMargin>0?a.push({type:"warning",message:"Low profit margin"}):a.push({type:"error",message:"Operating at a loss"}),c.salesCount===0&&a.push({type:"warning",message:"No sales in selected period"}),c.inventoryValue>c.revenue*2&&a.push({type:"warning",message:"High inventory relative to sales"}),a},isProfit:c.netProfit>0,isProfitable:c.netMargin>0,hasRevenue:c.revenue>0,hasExpenses:c.totalExpenses>0,compareWith:(a,s)=>{const l=O(t,n,d,a,s);return{revenue:{current:c.revenue,previous:l.revenue,change:c.revenue-l.revenue,percentageChange:l.revenue>0?(c.revenue-l.revenue)/l.revenue*100:0},netProfit:{current:c.netProfit,previous:l.netProfit,change:c.netProfit-l.netProfit,percentageChange:l.netProfit!==0?(c.netProfit-l.netProfit)/Math.abs(l.netProfit)*100:0}}}}}function te({startDate:r,endDate:i}){const{report:t,formatCurrency:n,formatPercentage:d,formatDate:c,getPerformanceIndicators:p}=ee(r,i),f=p(),N=()=>!r&&!i?"All Time":r&&i?r===i?c(r):`${c(r)} - ${c(i)}`:r?`From ${c(r)}`:i?`Until ${c(i)}`:"All Time";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Profit & Loss Statement"}),e.jsx("span",{className:"text-sm text-gray-600 bg-gray-100 px-3 py-1 rounded",children:N()})]}),f.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:f.map((g,o)=>e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${g.type==="success"?"bg-green-100 text-green-800":g.type==="warning"?"bg-yellow-100 text-yellow-800":g.type==="error"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:g.message},o))})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-gray-800 to-gray-700 text-white p-6",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:"Income Statement"}),e.jsxs("p",{className:"text-gray-300 text-sm mt-1",children:["For the period: ",N()]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[t.netProfit>=0?e.jsx(M,{className:"h-5 w-5 text-green-400"}):e.jsx(W,{className:"h-5 w-5 text-red-400"}),e.jsx("span",{className:`text-2xl font-bold ${t.netProfit>=0?"text-green-400":"text-red-400"}`,children:n(t.netProfit)})]}),e.jsx("p",{className:"text-gray-300 text-xs mt-1",children:"Net Income"})]})]})}),e.jsx("div",{className:"p-6",children:e.jsx("table",{className:"w-full",children:e.jsxs("tbody",{children:[e.jsx("tr",{className:"border-b border-gray-100",children:e.jsx("td",{className:"py-3",colSpan:"3",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(k,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"font-semibold text-gray-900 uppercase text-sm tracking-wide",children:"Revenue"})]})})}),e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 pl-8 text-gray-700",children:"Sales Revenue"}),e.jsxs("td",{className:"text-right text-gray-600 text-sm",children:[t.salesCount," transactions"]}),e.jsx("td",{className:"text-right font-medium text-gray-900 w-32",children:n(t.revenue)})]}),e.jsxs("tr",{className:"border-b-2 border-gray-200",children:[e.jsx("td",{className:"pt-2 pb-3 font-semibold text-gray-900",colSpan:"2",children:"Total Revenue"}),e.jsx("td",{className:"pt-2 pb-3 text-right font-bold text-gray-900",children:n(t.revenue)})]}),e.jsx("tr",{className:"border-b border-gray-100",children:e.jsx("td",{className:"py-3",colSpan:"3",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(R,{className:"h-4 w-4 text-orange-600"}),e.jsx("span",{className:"font-semibold text-gray-900 uppercase text-sm tracking-wide",children:"Cost of Goods Sold"})]})})}),e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 pl-8 text-gray-700",children:"Product Costs"}),e.jsxs("td",{className:"text-right text-gray-600 text-sm",children:[t.salesCount," units"]}),e.jsxs("td",{className:"text-right font-medium text-red-700 w-32",children:["(",n(t.cogs),")"]})]}),e.jsxs("tr",{className:"border-b-2 border-gray-200",children:[e.jsx("td",{className:"pt-2 pb-3 font-semibold text-gray-900",colSpan:"2",children:"Total COGS"}),e.jsxs("td",{className:"pt-2 pb-3 text-right font-bold text-red-700",children:["(",n(t.cogs),")"]})]}),e.jsxs("tr",{className:"bg-gray-50",children:[e.jsxs("td",{className:"py-3 px-4 font-bold text-gray-900",colSpan:"2",children:["GROSS PROFIT",e.jsxs("span",{className:"ml-2 text-sm font-normal text-gray-600",children:["(",d(t.grossMargin)," margin)"]})]}),e.jsx("td",{className:`py-3 px-4 text-right font-bold text-lg ${t.grossProfit>=0?"text-green-600":"text-red-600"}`,children:n(t.grossProfit)})]}),e.jsx("tr",{className:"border-b border-gray-100",children:e.jsx("td",{className:"py-3",colSpan:"3",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Y,{className:"h-4 w-4 text-red-600"}),e.jsx("span",{className:"font-semibold text-gray-900 uppercase text-sm tracking-wide",children:"Operating Expenses"})]})})}),Object.entries(t.expensesByCategory).length>0?Object.entries(t.expensesByCategory).sort(([,g],[,o])=>o-g).map(([g,o])=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 pl-8 text-gray-700",children:g}),e.jsxs("td",{className:"text-right text-gray-600 text-sm",children:[d(o/t.totalExpenses*100)," of expenses"]}),e.jsxs("td",{className:"text-right font-medium text-red-700 w-32",children:["(",n(o),")"]})]},g)):e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 pl-8 text-gray-700",children:"No expenses recorded"}),e.jsx("td",{className:"text-right text-gray-600 text-sm",children:"-"}),e.jsx("td",{className:"text-right font-medium text-gray-900 w-32",children:"$0.00"})]}),e.jsxs("tr",{className:"border-b-2 border-gray-200",children:[e.jsxs("td",{className:"pt-2 pb-3 font-semibold text-gray-900",colSpan:"2",children:["Total Operating Expenses",e.jsxs("span",{className:"ml-2 text-sm font-normal text-gray-600",children:["(",t.expensesCount," expenses)"]})]}),e.jsxs("td",{className:"pt-2 pb-3 text-right font-bold text-red-700",children:["(",n(t.totalExpenses),")"]})]}),e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("td",{className:"py-3 px-4 font-bold text-gray-900",colSpan:"2",children:"OPERATING INCOME"}),e.jsx("td",{className:`py-3 px-4 text-right font-bold text-lg ${t.grossProfit-t.totalExpenses>=0?"text-green-600":"text-red-600"}`,children:n(t.grossProfit-t.totalExpenses)})]}),e.jsxs("tr",{className:"bg-gradient-to-r from-gray-800 to-gray-700 text-white",children:[e.jsxs("td",{className:"py-4 px-4 font-bold text-lg",colSpan:"2",children:["NET INCOME",e.jsxs("span",{className:"ml-2 text-sm font-normal text-gray-300",children:["(",d(t.netMargin)," margin)"]})]}),e.jsx("td",{className:"py-4 px-4 text-right font-bold text-xl",children:n(t.netProfit)})]})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:n(t.revenue)}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Revenue"}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[t.salesCount," transactions"]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:n(t.totalExpenses)}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Expenses"}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[t.expensesCount," expenses"]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-2xl font-bold ${t.grossProfit>=0?"text-green-600":"text-red-600"}`,children:d(t.grossMargin)}),e.jsx("div",{className:"text-sm text-gray-600",children:"Gross Margin"}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[n(t.grossProfit)," profit"]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-2xl font-bold ${t.netProfit>=0?"text-green-600":"text-red-600"}`,children:d(t.netMargin)}),e.jsx("div",{className:"text-sm text-gray-600",children:"Net Margin"}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[n(t.netProfit)," net"]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[Object.keys(t.expensesByCategory).length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Expenses by Category"}),e.jsx("div",{className:"space-y-3",children:Object.entries(t.expensesByCategory).sort(([,g],[,o])=>o-g).map(([g,o])=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-700",children:g}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"font-medium text-gray-900",children:n(o)}),e.jsx("div",{className:"text-xs text-gray-500",children:d(o/t.totalExpenses*100)})]})]},g))})]}),t.salesByProduct.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Top Products by Revenue"}),e.jsx("div",{className:"space-y-3",children:t.salesByProduct.slice(0,5).map((g,o)=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-900 font-medium",children:g.productName}),e.jsxs("div",{className:"text-xs text-gray-500",children:[g.quantity," units sold"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"font-medium text-green-600",children:n(g.revenue)}),e.jsxs("div",{className:"text-xs text-gray-500",children:["+",n(g.profit)," profit"]})]})]},o))})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Current Assets"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:n(t.inventoryValue)}),e.jsx("div",{className:"text-sm text-gray-600",children:"Inventory Value"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-600",children:n(t.netProfit)}),e.jsx("div",{className:"text-sm text-gray-600",children:"Retained Earnings"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:n(t.inventoryValue+Math.max(0,t.netProfit))}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Assets"})]})]})]})]})}function se({startDate:r,endDate:i}){const{sales:t,products:n}=E(),d=v.useMemo(()=>t.filter(a=>{if(!a.date)return!1;const s=new Date(a.date);if(r&&i){const l=new Date(r),m=new Date(i);return s>=l&&s<=m}else if(r){const l=new Date(r);return s>=l}else if(i){const l=new Date(i);return s<=l}return!0}),[t,r,i]),c=v.useMemo(()=>{const a=d.reduce((j,x)=>j+(x.totalAmount||0),0),s=d.reduce((j,x)=>j+(x.profit||0),0),l=d.reduce((j,x)=>j+(x.quantity||0),0),m=d.length>0?a/d.length:0,u=a>0?s/a*100:0;return{totalRevenue:a,totalProfit:s,totalQuantity:l,totalSales:d.length,averageSaleValue:m,profitMargin:u}},[d]),p=v.useMemo(()=>{const a=new Map;return d.forEach(s=>{const l=s.productId||"unknown",m=a.get(l)||{productId:l,productName:s.productName||"Unknown Product",quantity:0,revenue:0,profit:0,salesCount:0};a.set(l,{...m,quantity:m.quantity+(s.quantity||0),revenue:m.revenue+(s.totalAmount||0),profit:m.profit+(s.profit||0),salesCount:m.salesCount+1})}),Array.from(a.values()).sort((s,l)=>l.revenue-s.revenue)},[d]),f=v.useMemo(()=>{const a=new Map;return d.forEach(s=>{const l=s.date||"unknown",m=a.get(l)||{date:l,revenue:0,profit:0,salesCount:0};a.set(l,{...m,revenue:m.revenue+(s.totalAmount||0),profit:m.profit+(s.profit||0),salesCount:m.salesCount+1})}),Array.from(a.values()).sort((s,l)=>new Date(s.date)-new Date(l.date))},[d]),N=a=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a||0),g=a=>!a||a==="unknown"?"Unknown":w(a),o=()=>r&&i?`${w(r)} - ${w(i)}`:r?`From ${w(r)}`:i?`Until ${w(i)}`:"All Time";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Sales Report"}),e.jsx("span",{className:"text-sm text-gray-500",children:o()})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(k,{className:"h-5 w-5 text-green-600"})}),e.jsx("p",{className:"text-xs text-gray-600",children:"Total Revenue"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:N(c.totalRevenue)})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(M,{className:"h-5 w-5 text-blue-600"})}),e.jsx("p",{className:"text-xs text-gray-600",children:"Total Profit"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:N(c.totalProfit)})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(R,{className:"h-5 w-5 text-purple-600"})}),e.jsx("p",{className:"text-xs text-gray-600",children:"Units Sold"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:c.totalQuantity})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(z,{className:"h-5 w-5 text-orange-600"})}),e.jsx("p",{className:"text-xs text-gray-600",children:"Total Sales"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:c.totalSales})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(P,{className:"h-5 w-5 text-indigo-600"})}),e.jsx("p",{className:"text-xs text-gray-600",children:"Avg Sale Value"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:N(c.averageSaleValue)})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(M,{className:"h-5 w-5 text-teal-600"})}),e.jsx("p",{className:"text-xs text-gray-600",children:"Profit Margin"}),e.jsxs("p",{className:"text-lg font-bold text-gray-900",children:[c.profitMargin.toFixed(1),"%"]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-4",children:"Sales by Product"}),p.length===0?e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No sales data available for the selected period"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Revenue"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Profit"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sales Count"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Margin %"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p.slice(0,10).map(a=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:a.productName}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:a.quantity}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:N(a.revenue)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:N(a.profit)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:a.salesCount}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:[a.revenue>0?(a.profit/a.revenue*100).toFixed(1):"0.0","%"]})]},a.productId))})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-4",children:"Daily Sales Trend"}),f.length===0?e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No sales data available for the selected period"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sales Count"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Revenue"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Profit"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Margin %"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:f.map(a=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:g(a.date)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:a.salesCount}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:N(a.revenue)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:N(a.profit)}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:[a.revenue>0?(a.profit/a.revenue*100).toFixed(1):"0.0","%"]})]},a.date))})]})})]})]})}function re({startDate:r,endDate:i}){const{expenses:t}=E(),n=v.useMemo(()=>t.filter(s=>{if(!s.date)return!1;const l=new Date(s.date);if(r&&i){const m=new Date(r),u=new Date(i);return l>=m&&l<=u}else if(r){const m=new Date(r);return l>=m}else if(i){const m=new Date(i);return l<=m}return!0}),[t,r,i]),d=v.useMemo(()=>{const s=n.reduce((u,j)=>u+(j.amount||0),0),l=n.length>0?s/n.length:0,m=n.reduce((u,j)=>(j.amount||0)>(u.amount||0)?j:u,n[0]||{amount:0});return{totalExpenses:s,totalTransactions:n.length,averageExpense:l,largestExpense:m}},[n]),c=v.useMemo(()=>{const s=new Map;n.forEach(u=>{const j=u.category||"Uncategorized",x=s.get(j)||{category:j,amount:0,count:0,percentage:0};s.set(j,{...x,amount:x.amount+(u.amount||0),count:x.count+1})});const l=d.totalExpenses;return Array.from(s.values()).map(u=>({...u,percentage:l>0?u.amount/l*100:0})).sort((u,j)=>j.amount-u.amount)},[n,d.totalExpenses]);v.useMemo(()=>{const s=new Map;return n.forEach(l=>{const m=l.date||"unknown",u=s.get(m)||{date:m,amount:0,count:0};s.set(m,{...u,amount:u.amount+(l.amount||0),count:u.count+1})}),Array.from(s.values()).sort((l,m)=>new Date(l.date)-new Date(m.date))},[n]);const p=v.useMemo(()=>{const s=new Map;return n.forEach(l=>{if(l.date){const m=l.date.substring(0,7),u=s.get(m)||{month:m,amount:0,count:0};s.set(m,{...u,amount:u.amount+(l.amount||0),count:u.count+1})}}),Array.from(s.values()).sort((l,m)=>l.month.localeCompare(m.month))},[n]),f=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(s||0),N=s=>!s||s==="unknown"?"Unknown":w(s),g=s=>{if(!s)return"Unknown";const[l,m]=s.split("-");return new Date(l,m-1).toLocaleDateString("en-US",{month:"short",year:"numeric"})},o=()=>r&&i?`${w(r)} - ${w(i)}`:r?`From ${w(r)}`:i?`Until ${w(i)}`:"All Time",a=s=>({Shipping:"bg-blue-100 text-blue-800",Container:"bg-purple-100 text-purple-800",Customs:"bg-green-100 text-green-800",Transportation:"bg-yellow-100 text-yellow-800",Storage:"bg-orange-100 text-orange-800",Marketing:"bg-pink-100 text-pink-800","Loss/Damage":"bg-red-100 text-red-800",Other:"bg-gray-100 text-gray-800",Uncategorized:"bg-gray-100 text-gray-800"})[s]||"bg-gray-100 text-gray-800";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Expense Report"}),e.jsx("span",{className:"text-sm text-gray-500",children:o()})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx($,{title:"Total Expenses",value:f(d.totalExpenses),subtitle:"Period total",icon:k,iconBgColor:"bg-red-100",iconColor:"text-red-600"}),e.jsx($,{title:"Transactions",value:`${d.totalTransactions}`,subtitle:"Expense entries",icon:Q,iconBgColor:"bg-blue-100",iconColor:"text-blue-600"}),e.jsx($,{title:"Average Expense",value:f(d.averageExpense),subtitle:"Per transaction",icon:P,iconBgColor:"bg-purple-100",iconColor:"text-purple-600"}),e.jsx($,{title:"Largest Expense",value:f(d.largestExpense?.amount||0),subtitle:d.largestExpense?.description?d.largestExpense.description.slice(0,30)+(d.largestExpense.description.length>30?"...":""):"No expenses",icon:V,iconBgColor:"bg-orange-100",iconColor:"text-orange-600"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-4",children:"Expenses by Category"}),c.length===0?e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No expense data available for the selected period"}):e.jsxs("div",{children:[e.jsx("div",{className:"space-y-3 mb-6",children:c.map(s=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${a(s.category)}`,children:s.category}),e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-red-600 h-2 rounded-full",style:{width:`${s.percentage}%`}})})]}),e.jsxs("div",{className:"ml-4 text-right",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:f(s.amount)}),e.jsxs("p",{className:"text-xs text-gray-500",children:[s.count," items • ",s.percentage.toFixed(1),"%"]})]})]},s.category))}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Transactions"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Amount"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Average"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"% of Total"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:c.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${a(s.category)}`,children:s.category})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:s.count}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right font-medium",children:f(s.amount)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:f(s.amount/s.count)}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:[s.percentage.toFixed(1),"%"]})]},s.category))})]})})]})]}),p.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-4",children:"Monthly Expense Trend"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Month"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Transactions"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Amount"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Average"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:g(s.month)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:s.count}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right font-medium",children:f(s.amount)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:f(s.amount/s.count)})]},s.month))})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-4",children:"Recent Expenses"}),n.length===0?e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No expenses found for the selected period"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.sort((s,l)=>new Date(l.date)-new Date(s.date)).slice(0,10).map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:N(s.date)}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:s.description||"No description"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${a(s.category)}`,children:s.category||"Uncategorized"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right font-medium",children:f(s.amount)})]},s.id))})]})})]})]})}function ae({dateRange:r,onDateRangeChange:i}){const[t,n]=v.useState(r);v.useEffect(()=>{n(r)},[r]);const d=[{id:"today",label:"Today",startDate:new Date().toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0]},{id:"thisWeek",label:"This Week",startDate:c(),endDate:new Date().toISOString().split("T")[0]},{id:"thisMonth",label:"This Month",startDate:new Date().toISOString().substring(0,7)+"-01",endDate:new Date().toISOString().split("T")[0]},{id:"lastMonth",label:"Last Month",startDate:p(),endDate:f()},{id:"thisYear",label:"This Year",startDate:new Date().getFullYear()+"-01-01",endDate:new Date().toISOString().split("T")[0]},{id:"lastYear",label:"Last Year",startDate:new Date().getFullYear()-1+"-01-01",endDate:new Date().getFullYear()-1+"-12-31"},{id:"allTime",label:"All Time",startDate:"",endDate:""}];function c(){const o=new Date,a=o.getDay(),s=o.getDate()-a+(a===0?-6:1);return new Date(o.setDate(s)).toISOString().split("T")[0]}function p(){const o=new Date;return new Date(o.getFullYear(),o.getMonth()-1,1).toISOString().split("T")[0]}function f(){const o=new Date;return new Date(o.getFullYear(),o.getMonth(),0).toISOString().split("T")[0]}const N=o=>{const a={startDate:o.startDate,endDate:o.endDate,preset:o.id};n(a),i(a)},g=(o,a)=>{const s={...t,[o]:a,preset:"custom"};n(s),i(s)};return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 px-4 sm:px-6 py-3 sm:py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_,{className:"h-4 sm:h-5 w-4 sm:w-5 text-gray-600"}),e.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900",children:"Report Filters"})]}),(t.startDate||t.endDate)&&e.jsxs("button",{onClick:()=>{const o={startDate:"",endDate:"",preset:"allTime"};n(o),i(o)},className:"text-xs sm:text-sm text-gray-500 hover:text-gray-700 flex items-center gap-1 transition-colors",children:[e.jsx(A,{className:"h-3 sm:h-4 w-3 sm:w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Clear all"}),e.jsx("span",{className:"sm:hidden",children:"Clear"})]})]})}),e.jsxs("div",{className:"p-4 sm:p-6 space-y-4 sm:space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center mb-2 sm:mb-3",children:[e.jsx(q,{className:"h-4 w-4 text-gray-500 mr-2"}),e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Quick Date Ranges"})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-7 gap-2",children:d.map(o=>e.jsx("button",{onClick:()=>N(o),className:`px-2 sm:px-3 py-1.5 sm:py-2 text-xs sm:text-sm font-medium rounded-lg border transition-all duration-200 ${t.preset===o.id?"bg-blue-600 border-blue-600 text-white shadow-md transform scale-105":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50 hover:border-gray-400"}`,children:o.label},o.id))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center mb-2 sm:mb-3",children:[e.jsx(P,{className:"h-4 w-4 text-gray-500 mr-2"}),e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Custom Date Range"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 sm:p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("label",{htmlFor:"startDate",className:"block text-xs font-medium text-gray-600 mb-1.5",children:"From"}),e.jsxs("div",{className:"relative",children:[e.jsx(P,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"date",id:"startDate",value:t.startDate,onChange:o=>g("startDate",o.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{htmlFor:"endDate",className:"block text-xs font-medium text-gray-600 mb-1.5",children:"To"}),e.jsxs("div",{className:"relative",children:[e.jsx(P,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"date",id:"endDate",value:t.endDate,onChange:o=>g("endDate",o.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white"})]})]})]}),t.preset==="custom"&&(t.startDate||t.endDate)&&e.jsxs("button",{onClick:()=>{g("startDate",""),g("endDate","")},className:"mt-3 text-sm text-blue-600 hover:text-blue-800 font-medium flex items-center gap-1 transition-colors",children:[e.jsx(A,{className:"h-3 w-3"}),"Clear custom range"]})]})]}),(t.startDate||t.endDate)&&e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4 border border-blue-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"h-8 w-8 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(P,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium text-gray-600 uppercase tracking-wide",children:"Active Period"}),e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:t.startDate&&t.endDate?t.startDate===t.endDate?w(t.startDate):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:w(t.startDate)}),e.jsx(H,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{children:w(t.endDate)})]}):t.startDate?`From ${w(t.startDate)}`:`Until ${w(t.endDate)}`})]})]}),t.startDate&&t.endDate&&e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Duration"}),e.jsxs("div",{className:"text-sm font-semibold text-gray-900",children:[Math.ceil((new Date(t.endDate)-new Date(t.startDate))/(1e3*60*60*24))+1," days"]})]})]})})]})]})}function ne({dateRange:r,activeReport:i}){const{sales:t,expenses:n,products:d,containers:c}=E(),{showSuccessMessage:p,showErrorMessage:f}=G(),[N,g]=v.useState(!1),o=async()=>{g(!0);try{let x="",y="";switch(i){case"profitLoss":x=l(),y=`profit-loss-${a()}.csv`;break;case"sales":x=m(),y=`sales-report-${a()}.csv`;break;case"expenses":x=u(),y=`expenses-report-${a()}.csv`;break;default:x=l(),y=`business-report-${a()}.csv`}const h=new Blob([x],{type:"text/csv;charset=utf-8;"}),D=document.createElement("a");if(D.download!==void 0){const S=URL.createObjectURL(h);D.setAttribute("href",S),D.setAttribute("download",y),D.style.visibility="hidden",document.body.appendChild(D),D.click(),document.body.removeChild(D)}p("Export Successful",`${y} has been downloaded`)}catch(x){console.error("Export error:",x),f("Export Failed","Failed to export report data")}finally{g(!1)}},a=()=>r.startDate&&r.endDate?r.startDate===r.endDate?r.startDate:`${r.startDate}_to_${r.endDate}`:r.startDate?`from_${r.startDate}`:r.endDate?`until_${r.endDate}`:new Date().toISOString().split("T")[0],s=x=>!r.startDate&&!r.endDate?x:x.filter(y=>{const h=y.date;if(!h)return!1;const D=!r.startDate||h>=r.startDate,S=!r.endDate||h<=r.endDate;return D&&S}),l=()=>{const x=s(t),y=s(n),h=x.reduce((b,C)=>b+(C.totalAmount||0),0),D=x.reduce((b,C)=>b+(C.costPerUnit||0)*(C.quantity||0),0),S=h-D,F=y.reduce((b,C)=>b+(C.amount||0),0),B=S-F;return["Profit & Loss Statement",`Period: ${r.startDate||"Beginning"} to ${r.endDate||"Present"}`,"","Category,Amount",`Revenue,$${h.toFixed(2)}`,`Cost of Goods Sold,-$${D.toFixed(2)}`,`Gross Profit,$${S.toFixed(2)}`,`Operating Expenses,-$${F.toFixed(2)}`,`Net Profit,$${B.toFixed(2)}`,"","Sales Summary","Date,Product,Quantity,Price per Unit,Total,Profit",...x.map(b=>`${b.date},${b.productName},${b.quantity},$${(b.pricePerUnit||0).toFixed(2)},$${(b.totalAmount||0).toFixed(2)},$${(b.profit||0).toFixed(2)}`),"","Expenses Summary","Date,Category,Description,Amount",...y.map(b=>`${b.date},${b.category},${b.description},$${(b.amount||0).toFixed(2)}`)].join(`
`)},m=()=>{const x=s(t);return["Sales Report",`Period: ${r.startDate||"Beginning"} to ${r.endDate||"Present"}`,"","Date,Time,Product,Category,Quantity,Price per Unit,Total Amount,Cost per Unit,Profit,Notes",...x.map(h=>`${h.date},${h.time||""},${h.productName},,${h.quantity},$${(h.pricePerUnit||0).toFixed(2)},$${(h.totalAmount||0).toFixed(2)},$${(h.costPerUnit||0).toFixed(2)},$${(h.profit||0).toFixed(2)},"${h.notes||""}"`)].join(`
`)},u=()=>{const x=s(n);return["Expenses Report",`Period: ${r.startDate||"Beginning"} to ${r.endDate||"Present"}`,"","Date,Category,Description,Amount,Container ID,Notes",...x.map(h=>`${h.date},${h.category},${h.description},$${(h.amount||0).toFixed(2)},${h.containerId||""},"${h.notes||""}"`)].join(`
`)},j={profitLoss:"P&L Report",sales:"Sales Report",expenses:"Expenses Report"};return e.jsx("button",{onClick:o,disabled:N,className:"inline-flex items-center px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-md shadow-sm hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed",children:N?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Exporting..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"h-4 w-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export ",j[i]||"Report"]})})}function ye(){const[r,i]=v.useState({startDate:"",endDate:"",preset:"thisMonth"}),[t,n]=v.useState("profitLoss"),d=p=>{i(p)},c=[{id:"profitLoss",name:"Profit & Loss",description:"Revenue, expenses, and profitability analysis"},{id:"sales",name:"Sales Report",description:"Detailed sales performance analysis"},{id:"expenses",name:"Expense Report",description:"Expense breakdown and analysis"}];return e.jsxs("div",{className:"py-6 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Reports & Analytics"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Comprehensive business performance analysis"})]}),e.jsx("div",{className:"mt-4 sm:mt-0",children:e.jsx(ne,{dateRange:r,activeReport:t})})]}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-4 sm:space-x-8",children:c.map(p=>e.jsx("button",{onClick:()=>n(p.id),className:`py-4 px-1 border-b-2 font-medium text-sm flex-1 sm:flex-none ${t===p.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,title:`${p.name}: ${p.description}`,children:e.jsxs("div",{className:"text-center sm:text-left",children:[e.jsx("div",{className:"text-xs sm:text-sm",children:p.name.replace(" & ","/")}),e.jsx("div",{className:"hidden sm:block text-xs font-normal mt-1",children:p.description})]})},p.id))})})}),e.jsx("div",{className:"mb-6",children:e.jsx(ae,{dateRange:r,onDateRangeChange:d})}),e.jsxs("div",{className:"space-y-6",children:[t==="profitLoss"&&e.jsx(te,{startDate:r.startDate||null,endDate:r.endDate||null}),t==="sales"&&e.jsx(se,{startDate:r.startDate||null,endDate:r.endDate||null}),t==="expenses"&&e.jsx(re,{startDate:r.startDate||null,endDate:r.endDate||null})]})]})}export{ye as default};
